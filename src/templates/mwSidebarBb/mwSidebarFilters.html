<div class="mw-sidebar-filters"
     ng-class="{'form-active':viewModel.showFilterForm, 'form-in-active':!viewModel.showFilterForm}">

  <div ng-if="mwListCollection"
       class="btn-group btn-block persisted-filters">
    <button class="btn btn-default btn-block dropdown-toggle"
            ng-class="{hidden:viewModel.showFilterForm}"
            data-toggle="dropdown">
      {{appliedFilter.get('name') || 'All'}}
    </button>

    <ul class="filter-dropdown dropdown-menu" style="min-width:100%" role="menu">
      <li ng-class="{'active':appliedFilter.id===filter.id}"
          class="filter">
        <a href="#"
           mw-prevent-default="click"
           ng-click="revokeFilter()"
           class="btn btn-link">
          All
        </a>
      </li>
      <li ng-repeat="filter in filters.models"
          ng-class="{'active':appliedFilter.id===filter.id}"
          class="filter">
        <a href="#"
           mw-prevent-default="click"
           ng-click="applyFilter(filter)"
           class="btn btn-link">
          {{filter.get('name')}}
        </a>

        <div ng-if="appliedFilter.id===filter.id"
             class="pull-right action-btns hidden-xs hidden-sm">

          <button class="btn btn-link"
                  ng-click="editFilter(filter)">
            <span mw-icon="rln-icon edit"></span>
          </button>

          <button class="btn btn-link"
                  ng-click="deleteFilter(filter)">
            <span mw-icon="rln-icon delete"></span>
          </button>

        </div>
      </li>
      <li class="filter">
        <a href="#"
           mw-prevent-default="click"
           ng-click="addFilter(filter)"
           class="btn btn-link">
          + Add Filter
        </a>
      </li>
    </ul>
  </div>

  <div class="form" ng-if="viewModel.canShowForm">

    <div ng-transclude></div>
    <div ng-if="mwListCollection" class="panel panel-default margin-top-10">
      <div class="panel-body">
        <p>
          You can save this filter to your personal quick filter collection
        </p>
        <input type="text" placeholder="Quick Filter Name" class="margin-top-10" ng-model="viewModel.tmpFilter.attributes.name">

        <div class="margin-top-10">
          <button class="btn btn-danger" ng-click="cancelFilterEdit()">
            {{'common.cancel' | i18n}}
          </button>

          <button class="btn btn-primary"
                  ng-disabled="!viewModel.tmpFilter.isValid()"
                  ng-click="saveFilter()">
            {{'common.save' | i18n}}
          </button>
        </div>
      </div>
    </div>

  </div>

</div>