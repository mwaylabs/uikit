!function(a,b){"use strict";b.module("mwUI",["ngSanitize","mwModal","mwWizard","mwCollection","mwListable","mwListableBb","mwForm","mwFormBb","mwComponents","mwComponentsBb","mwTabs","mwSidebar","mwSidebarBb","mwFormValidators","mwNav","mwPopover","mwHelper","mwMap","mwI18n","mwResponseHandler","mwResponseToastHandler","mwFilters","mwFileUpload"]).config(function(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),window.ieVersion=function(){return null!==new RegExp(/MSIE ([0-9]{1,}[\.0-9]{0,})/).exec(navigator.userAgent)?parseFloat(RegExp.$1):!1}()}),a.mwUI={},window.mwUI.Backbone={baseUrl:"",Selectable:{},concatUrlParts:function(){var a="";return _.forEach(arguments,function(b){b=b.replace(/^\//,""),b=b.replace(/\/$/,""),a+=b+"/"}),a}},b.module("mwUI.Backbone",[]),mwUI.Backbone.NestedModel=Backbone.NestedModel=Backbone.Model.extend({nested:function(){return{}},_prepare:function(){var a=this.nested(),b={};for(var c in a){var d=new a[c];d.parent=this,b[c]=d}return b},_setNestedModel:function(a,b){if(_.isObject(b))this.get(a).set(b);else{var c=this.get(a).idAttribute;this.get(a).set(c,b)}},_setNestedCollection:function(a,b){if(_.isObject(b)&&!_.isArray(b))this.get(a).add(b);else if(_.isArray(b))b.forEach(function(b){this._setNestedCollection(a,b)}.bind(this));else{var c=this.get(a).model.prototype.idAttribute,d={};d[c]=b,this.get(a).add(d)}},_setNestedAttributes:function(a){for(var b in a){var c=this.nested(),d=a[b],e=c[b];!e||d instanceof e||!this.get(b)||(this.get(b)instanceof Backbone.Model?this._setNestedModel(b,d):this.get(b)instanceof Backbone.Collection&&this._setNestedCollection(b,d),delete a[b])}return a},_nestedModelToJson:function(a){var b;return b=a instanceof Backbone.NestedModel?a._prepareDataForServer():a.toJSON()},_prepareDataForServer:function(){var a=_.extend({},this.attributes),b=this.nested();for(var c in b){var d=this.get(c);if(d instanceof Backbone.Model)a[c]=this._nestedModelToJson(d);else if(d instanceof Backbone.Collection){var e=[];d.each(function(a){e.push(this._nestedModelToJson(a))}.bind(this)),a[c]=e}}return this.compose(a)},constructor:function(a,b){return this.attributes=this._prepare(),this.set(a),a=this.attributes,Backbone.Model.prototype.constructor.call(this,a,b)},set:function(a,b){var c={};return _.isString(a)?c[a]=b:_.isObject(a)&&(c=a),c=this._setNestedAttributes(c),Backbone.Model.prototype.set.call(this,c)},compose:function(a){return a},toJSON:function(a){return a?this._prepareDataForServer():Backbone.Model.prototype.toJSON.apply(this,arguments)},clear:function(){var a=Backbone.Model.prototype.clear.apply(this,arguments);return this.attributes=this._prepare(),a}}),mwUI.Backbone.Selectable.Model=function(a,b){var c=a,d=b.selected||!1;this.isInCollection=!1,this.hasDisabledFn="function"==typeof b.isDisabled||!1,this.isDisabled=function(){return this.hasDisabledFn?b.isDisabled.apply(a,arguments):!1},this.isSelected=function(){return d},this.select=function(b){b=b||{},this.isDisabled()&&!b.force||this.isSelected()||(d=!0,b.silent||this.trigger("change change:select",a,this))},this.unSelect=function(b){b=b||{},this.isSelected()&&(d=!1,b.silent||this.trigger("change change:unselect",a,this))},this.toggleSelect=function(){this.isSelected()?this.unSelect():this.select()};var e=function(){if(!(c instanceof Backbone.Model))throw new Error("First parameter has to be the instance of a model")};e.call(this)},_.extend(mwUI.Backbone.Selectable.Model.prototype,Backbone.Events),mwUI.Backbone.SelectableModel=Backbone.SelectableModel=Backbone.Model.extend({selectable:!0,selectableOptions:function(){return{selected:!1,isDisabled:null}},selectableModelConstructor:function(a){this.selectable&&(this.selectable=new mwUI.Backbone.Selectable.Model(this,this.selectableOptions.call(this,a)))},constructor:function(a,b){var c=Backbone.Model.prototype.constructor.call(this,a,b);return this.selectableModelConstructor(b),c}}),mwUI.Backbone.Model=mwUI.Backbone.NestedModel.extend({selectable:!0,basePath:"",endpoint:null,selectableOptions:mwUI.Backbone.SelectableModel.prototype.selectableOptions,urlRoot:function(){var a=_.result(this,"basePath"),b=_.result(this,"endpoint");if(b)return window.mwUI.Backbone.concatUrlParts(mwUI.Backbone.baseUrl,a,b);throw new Error("An endpoint has to be specified")},getEndpoint:function(){return this.urlRoot()},setEndpoint:function(a){this.endpoint=a},constructor:function(){var a=mwUI.Backbone.NestedModel.prototype.constructor.apply(this,arguments);return mwUI.Backbone.SelectableModel.prototype.selectableModelConstructor.apply(this,arguments),a}}),mwUI.Backbone.Filter=function(){var a=function(a,b){return _.isUndefined(a)||null===a||""===a||0===a.length||_.isArray(a)&&0===_.compact(a).length?null:b};return{containsString:function(b,c){return a(c,{type:"containsString",fieldName:b,contains:c})},string:function(b,c){return a(c,{type:"string",fieldName:b,value:c})},and:function(a){return this.logOp(a,"AND")},nand:function(a){return this.logOp(a,"NAND")},or:function(a){return this.logOp(a,"OR")},logOp:function(a,b){return a=_.without(a,null),0===a.length?null:{type:"logOp",operation:b,filters:a}},"boolean":function(b,c){return a(c,{type:"boolean",fieldName:b,value:c})},stringMap:function(b,c,d){return"%%"===d&&(d=""),a(d,{type:"stringMap",fieldName:b,value:d,key:c})},stringEnum:function(b,c){return a(c,{type:"stringEnum",fieldName:b,values:_.flatten(c)})},"long":function(b,c){return a(c,{type:"long",fieldName:b,value:c})},like:function(b,c){return a(c,{type:"like",fieldName:b,like:c})},notNull:function(b){return a(!0,{type:"null",fieldName:b})},dateRange:function(b,c,d){return a(d,a(c,{type:"dateRange",fieldName:b,min:c,max:d}))}}},mwUI.Backbone.Filterable=function(a,b){b=b||{};var c,d,e=a,f=b.limit,g=f?b.offset:!1,h=b.page||1,i=b.perPage||30,j=b.filterValues?JSON.parse(JSON.stringify(b.filterValues)):b.filterValues,k=_.clone(b.customUrlParams),l=b.filterDefinition,m=b.sortOrder;this.filterValues=b.filterValues||{},this.customUrlParams=b.customUrlParams||{},this.fields=b.fields,this.filterIsSet=!1,this.getRequestParams=function(a,b,c){if(c.params=c.params||{},"read"===a){var e=this.getFilters();return e&&(c.params.filter=e),JSON.stringify(e)!==JSON.stringify(d)&&(h=1),d=e,i&&h&&(f||_.isUndefined(f))&&(c.params.limit=i,c.params.offset=h>1?i*(h-1):0),m&&m.length>0&&(c.params.sortOrder=m),(f||g)&&(c.params.limit=f,c.params.offset=g),f===!1&&delete c.params.limit,this.fields&&this.fields.length>0&&(c.params.field=this.fields),this.customUrlParams&&_.extend(c.params,_.result(this,"customUrlParams")),c.params.getNonpagedCount=!0,c}},this.setLimit=function(a){f=a,g=g||0},this.setTotalAmount=function(a){c=a},this.getTotalAmount=function(){return c},this.loadPreviousPage=function(){return h-=1,e.fetch({remove:!1})},this.hasPreviousPage=function(){return h>=1},this.loadNextPage=function(){return h+=1,e.fetch({remove:!1})},this.hasNextPage=function(){return c&&c>e.length},this.getPage=function(){return h},this.getTotalPages=function(){return Math.floor(c/i)},this.setSortOrder=function(a){h=1,m=a},this.getSortOrder=function(){return m},this.setFilters=function(a){_.forEach(a,function(a,b){if(!_.has(this.filterValues,b))throw new Error("Filter named '"+b+"' not found, did you add it to filterValues of the model?");this.filterValues[b]=a},this),this.filterIsSet=!0},this.getFilters=function(){return _.isFunction(l)?l.apply(this):void 0},this.resetFilters=function(){this.filterValues=j?JSON.parse(JSON.stringify(j)):j,this.customUrlParams=k,this.filterIsSet=!1},function(){if(!(e instanceof Backbone.Collection))throw new Error("First parameter has to be the instance of a collection")}()},mwUI.Backbone.FilterableCollection=Backbone.FilterableCollection=Backbone.Collection.extend({selectable:!0,filterableOptions:function(){return{limit:!1,offset:!1,page:1,perPage:30,filterValues:{},customUrlParams:{},filterDefinition:function(){},fields:[],sortOrder:""}},filterableCollectionConstructor:function(a){this.filterable&&(this.filterable=new mwUI.Backbone.Filterable(this,this.filterableOptions.call(this,a)))},constructor:function(a,b){var c=Backbone.Model.prototype.constructor.call(this,a,b);return this.filterableCollectionConstructor(b),c}}),mwUI.Backbone.Selectable.Collection=function(a,b){var c=a,d=b||{},e=!0,f=d.isSingleSelection||!1,g=d.addPreSelectedToCollection||!1,h=d.unSelectOnRemove,i=b.preSelected,j=new Backbone.Collection,k=function(){if(i instanceof Backbone.Model)f=!0,this.preSelectModel(i);else{if(!(i instanceof Backbone.Collection))throw new Error("The option preSelected has to be either a Backbone Model or Collection");f=!1,this.preSelectCollection(i)}},l=function(a){this.listenTo(a.selectable,"change:select",function(){j.get(a)||this.select(a)}.bind(this))},m=function(a){this.listenTo(a.selectable,"change:unselect",function(){j.get(a)&&this.unSelect(a)}.bind(this))},n=function(a,b){if(a&&a.selectable){var d=j.get(a);d?(c.get(a)?(a.selectable.isInCollection=!0,d.selectable.isInCollection=!0):(a.selectable.isInCollection=!1,d.selectable.isInCollection=!1),a.selectable.select(b),d.selectable.select(b)):a.selectable.unSelect(b),l.call(this,a),m.call(this,a)}},o=function(a,b){i&&(this.isSingleSelection()?i=b:(i.remove(a,{silent:!0}),i.add(b,{silent:!0})))},p=function(a){var b=this.getSelected().get(a);b&&(j.remove(b,{silent:!0}),j.add(a,{silent:!0}),o.call(this,b,a),n.call(this,a,{silent:!0}))};this.getSelected=function(){return j},this.getDisabled=function(){var a=new Backbone.Collection;return e&&c.each(function(b){b.selectable&&b.selectable.isDisabled()&&a.add(b)}),a},this.select=function(a,b){if(b=b||{},!(a instanceof Backbone.Model))throw new Error("The first argument has to be a Backbone Model");a instanceof c.model||(a=new c.model(a.toJSON())),!a.selectable||a.selectable.isDisabled()&&!b.force||(f&&this.unSelectAll(),a.on("change",function(a,b){b=b||{},(b.unset||!a.id||a.id.length<1)&&this.unSelect(a)},this),j.add(a),n.call(this,a,b),this.trigger("change change:add",a,this))},this.selectAll=function(){c.each(function(a){this.select(a)},this)},this.unSelect=function(a,b){b=b||{},j.remove(a),n.call(this,a,b),this.trigger("change change:remove",a,this)},this.unSelectAll=function(){var a=this.getSelected().clone();a.each(function(a){this.unSelect(a)},this)},this.toggleSelectAll=function(){this.allSelected()?this.unSelectAll():this.selectAll()},this.allSelected=function(){var a=this.getDisabled().length;return this.getSelected().length===c.length-a},this.allDisabled=function(){return this.getDisabled().length===c.length},this.isSingleSelection=function(){return f},this.reset=function(){this.unSelectAll(),k.call(this)},this.preSelectModel=function(a){a.id&&(!c.get(a)&&g&&c.add(a),this.select(a,{force:!0,silent:!0}))},this.preSelectCollection=function(a){a.each(function(a){this.preSelectModel(a)},this),a.on("add",function(a){this.preSelectModel(a)},this),a.on("remove",function(a){this.unSelect(a)},this)};var q=function(){if(!(c instanceof Backbone.Collection))throw new Error("The first parameter has to be from type Backbone.Collection");c.on("add",function(a){e=a.selectable.hasDisabledFn,n.call(this,a),p.call(this,a)},this),c.on("remove",function(a){h?this.unSelect(a):n.call(this,a)},this),c.on("reset",function(){h?this.unSelectAll():this.getSelected().each(function(a){n.call(this,a)},this)},this),i&&k.call(this)};q.call(this)},_.extend(mwUI.Backbone.Selectable.Collection.prototype,Backbone.Events),mwUI.Backbone.SelectableCollection=Backbone.SelectableCollection=Backbone.Collection.extend({selectable:!0,selectableOptions:function(){return{isSingleSelection:!1,addPreSelectedToCollection:!1,unSelectOnRemove:!1,preSelected:new Backbone.Collection}},selectableCollectionConstructor:function(a){this.selectable&&(this.selectable=new mwUI.Backbone.Selectable.Collection(this,this.selectableOptions.call(this,a)))},constructor:function(a,b){var c=Backbone.Collection.prototype.constructor.call(this,a,b);return this.selectableCollectionConstructor(b),c}}),mwUI.Backbone.Collection=Backbone.Collection.extend({selectable:!0,filterable:!0,basePath:"",endpoint:null,selectableOptions:mwUI.Backbone.SelectableCollection.prototype.selectableOptions,filterableOptions:mwUI.Backbone.FilterableCollection.prototype.filterableOptions,model:mwUI.Backbone.Model,url:function(){var a=_.result(this,"basePath"),b=_.result(this,"endpoint");if(b)return window.mwUI.Backbone.concatUrlParts(mwUI.Backbone.baseUrl,a,b);throw new Error("An endpoint has to be specified")},getEndpoint:function(){return this.url()},setEndpoint:function(a){this.endpoint=a},constructor:function(){var a=Backbone.Collection.prototype.constructor.apply(this,arguments);return mwUI.Backbone.SelectableCollection.prototype.selectableCollectionConstructor.apply(this,arguments),mwUI.Backbone.FilterableCollection.prototype.filterableCollectionConstructor.apply(this,arguments),a}});var c,d,e=Backbone.sync,f=Backbone.ajax;b.module("mwUI.Backbone").config(function(){Backbone.sync=function(a,b,c){return e.call(Backbone,a,b,c).then(function(){return b})},Backbone.ajax=function(a){return c?(a.method=a.type,c.apply(b,arguments)):f.apply(this,arguments)}}).run(["$http","$q",function(a,b){c=a,d=b}]),b.module("mwFileUpload",[]).provider("mwFileUpload",function(){var a={};this.setGlobalConfig=function(b){_.extend(a,b)},this.$get=function(){return{getGlobalConfig:function(){return a}}}}).directive("mwFileUpload",["$q","mwFileUpload","ResponseHandler","mwMimetype","$timeout",function(a,c,d,e,f){return{restrict:"A",scope:{url:"@",name:"@",model:"=",attribute:"@",labelAttribute:"@",showFileName:"=",mwRequired:"=",validator:"@",text:"@",formData:"=",successCallback:"&",errorCallback:"&",stateChangeCallback:"&",fullScreen:"=",hiddenBtn:"="},require:"?^form",templateUrl:"uikit/templates/mwFileUpload/mwFileUpload.html",link:function(g,h,i,j){var k,l=h.find(".mw-file-upload"),m=h.find("input[type=file]");g._showFileName=b.isDefined(g.showFileName)?g.showFileName:!0,g.uploadState="none",g.mimeTypeGroup=e.getMimeTypeGroup(i.validator),g.mimeTypeGroup?g.inputValidator=i.validator:g.inputValidator="*/*";var n=function(b,c){var e={config:{method:b.type,url:b.url},data:b.result,headers:b.headers,status:b.xhr().status,statusText:b.xhr().statusText},f=d.handle(e,c);return f?f:c?a.reject(e):a.when(e)},o=function(a,b){n(a,!0)["catch"](function(){f(g.successCallback.bind(this,{result:b}))})},p=function(a){return a&&a.results&&_.isArray(a.results)&&a.results.length>0&&(a=a.results[0]),a},q=function(a,b){var c=p(b);!i.validator||e.checkMimeType(c.contentType,i.validator)?(g.model instanceof window.mCAP.Model?g.model.set(g.model.parse(c)):g.attribute?g.model=c[g.attribute]:g.model=c,j&&j.$setDirty(),n(a,!1).then(function(){f(g.successCallback.bind(this,{result:c}))})):(a.result&&a.result.message&&(a.result.message="Validation failed. File has to be "+i.validator),o(a,a.result))},r=function(a){g.dataLoaded=a.loaded,g.dataTotal=a.total,g.uploadProgress=parseInt(g.dataLoaded/g.dataTotal*100,10),g.stateChangeCallback({data:a,progress:g.uploadProgress})};g.triggerUploadDialog=function(){h.find("input").click()},g.fileIsSet=function(){return g.model instanceof window.mCAP.Model?!g.model.isNew():!!g.model},g.getFileName=function(){if(g.fileIsSet){var a=g.labelAttribute||"name";return g.model instanceof window.mCAP.Model?g.model.get(a):g.model[a]}},g.remove=function(){j&&j.$setDirty(),g.model instanceof window.mCAP.Model?g.model.clear():g.model=null},b.element(document).on("dragover",function(){k?clearTimeout(k):f(function(){g.isInDragState=!0}),k=setTimeout(function(){k=null,f(function(){g.isInDragState=!1})},100)}),l.on("dragover",function(){f(function(){g.isInDragOverState=!0})}),l.on("dragleave",function(){f(function(){g.isInDragOverState=!1})}),b.element(document).on("drop dragover",function(a){a.preventDefault()}),m.fileupload({url:g.url,dropZone:h.find(".drop-zone"),dataType:"json",formData:g.formData,send:function(){f(function(){g.uploadState="uploading"})},progress:function(a,b){f(function(){r(b)})},done:function(a,b){f(function(){g.uploadState="done",g.uploadProgress=0,q(b,b.result)})},error:function(a){f(function(){g.uploadState="done",g.uploadProgress=0,o(this,a.responseJSON)}.bind(this))}}),m.fileupload("option",c.getGlobalConfig()),g.$watch("url",function(a){a&&m.fileupload("option",{url:a})}),g.$watch("formData",function(a){a&&m.fileupload("option",{formData:g.formData})},!0)}}}]),b.module("mwFileUpload").service("mwMimetype",function(){return{application:["application/atom+xml","application/ecmascript","application/EDIFACT","application/json","application/javascript","application/octet-stream","application/ogg","application/pdf","application/postscript","application/rdf+xml","application/rss+xml","application/soap+xml","application/font-woff","application/xhtml+xml","application/xml","application/xml-dtd","application/xop+xml","application/zip","application/*"],audio:["audio/basic","audio/L24","audio/mp4","audio/mpeg","audio/ogg","audio/opus","audio/vorbis","audio/vnd.rn-realaudio","audio/vnd.wave","audio/webm","audio/*"],image:["image/gif","image/jpg","image/jpeg","image/pjpeg","image/png","image/svg+xml","image/*"],video:["video/mpeg","video/mp4","video/ogg","video/quicktime","video/webm","video/x-matroska","video/x-ms-wmv","video/x-flv","video/*"],text:["text/cmd","text/css","text/csv","text/html","text/javascript (Obsolete)","text/plain","text/vcard","text/xml","text/*"],getMimeTypeGroup:function(a){return-1!==this.text.indexOf(a)?"text":-1!==this.video.indexOf(a)?"video":-1!==this.image.indexOf(a)?"image":-1!==this.audio.indexOf(a)?"audio":-1!==this.application.indexOf(a)?"application":!1},checkMimeType:function(a,b){return"*/*"===a||"*/*"===b?!0:this.getMimeTypeGroup(a)===this.getMimeTypeGroup(b)}}}),b.module("mwFilters",[]).filter("humanize",function(){return function(a){return a?"common.yes":"common.no"}}).filter("neverIfZero",["i18n",function(a){var b=function(b){return 0===b?a.get("common.never"):b};return b.$stateful=!0,b}]).filter("dashIfBlank",function(){return function(a){return a?a:"-"}}).filter("starIfBlank",function(){return function(a){return a?a:"*"}}).filter("join",function(){return function(a,c){if(!b.isArray(a))return a;if(c.lastSeparator){var d=_.clone(a),e=d.pop();return d.join(c.separator)+" "+c.lastSeparator+" "+e}return a.join(c.separator)}}).filter("zeroIfEmpty",function(){return function(a){return a?a:0}}).filter("readableFilesize",function(){return function(a,b){if(0===a)return"0.0 kB";var c=-1,d=["kB","MB","GB","TB","PB","EB","ZB","YB"];void 0!==b&&(c=d.indexOf(b));do a/=1024,c++;while(a>1024);return Math.max(a,.1).toFixed(1)+" "+d[c]}}).filter("reduceStringTo",function(){return function(a,b){return b&&a&&a.length>b?a.substr(0,b)+"...":a}}),b.module("mwComponents",[]).directive("mwPanel",function(){return{restrict:"A",transclude:!0,templateUrl:"uikit/templates/mwComponents/mwPanel.html"}}).directive("mwContentHeader",function(){return{transclude:!0,template:'<div class="mw-content-header" ng-transclude></div>'}}).directive("mwSortIndicator",function(){return{restrict:"A",replace:!0,scope:{isActive:"=",isReversed:"="},transclude:!0,templateUrl:"uikit/templates/mwComponents/mwSortIndicator.html"}}).directive("mwAlert",function(){return{restrict:"A",replace:!0,scope:{type:"@mwAlert"},transclude:!0,templateUrl:"uikit/templates/mwComponents/mwAlert.html"}}).directive("mwHeader",["$location","$route","$rootScope",function(a,b,c){return{transclude:!0,scope:{title:"@",url:"@",mwTitleIcon:"@",showBackButton:"=",warningText:"@",warningCondition:"=",mwBreadCrumbs:"="},templateUrl:"uikit/templates/mwComponents/mwHeader.html",link:function(d,e,f,g,h){c.siteTitleDetails=d.title,h(function(a){a&&0!==a.length||d.showBackButton||e.find(".mw-header").addClass("no-buttons")}),d.refresh=function(){b.reload()},!d.url&&d.mwBreadCrumbs&&d.mwBreadCrumbs.length>0?(d.url=d.mwBreadCrumbs[d.mwBreadCrumbs.length-1].url,d.url=d.url.replace("#","")):!d.url&&d.showBackButton&&console.error("Url attribute in header is missing!!"),d.back=function(){a.path(d.url)}}}}]).directive("mwIcon",function(){return{restrict:"A",scope:{mwIcon:"@",tooltip:"@",placement:"@",style:"@"},template:'<i ng-class="iconClasses" style="{{style}}" mw-tooltip="{{tooltip}}" placement="{{placement}}"></i>',link:function(a,c){c.addClass("mw-icon"),a.$watch("mwIcon",function(c){if(c){var d=b.isArray(a.mwIcon.match(/^fa-/)),e=b.isArray(a.mwIcon.match(/rln-icon/));d?a.iconClasses="fa "+a.mwIcon:e?a.iconClasses="rln-icon "+a.mwIcon:a.iconClasses="glyphicon glyphicon-"+a.mwIcon}})}}}).directive("mwTooltip",function(){return{restrict:"A",scope:{text:"@mwTooltip",placement:"@"},link:function(a,b){a.$watch("text",function(){b.data("bs.popover").setContent()}),b.popover({trigger:"hover",placement:a.placement||"bottom",content:function(){return a.text},container:"body"});var c=function(){var a=b.data("bs.popover");a&&a.tip()&&a.tip().detach().remove()};a.$on("$destroy",function(){c()})}}}).directive("mwBadge",function(){return{restrict:"A",replace:!0,scope:{mwBadge:"@"},transclude:!0,template:'<span class="mw-badge label label-{{mwBadge}}" ng-transclude></span>'}}).directive("mwEmptyState",function(){return{restrict:"A",replace:!0,scope:{mwBadge:"@"},transclude:!0,template:'<div class="mw-empty-state"> <img src="images/logo-grey.png"><h2 ng-transclude class="lead"></h2> </div>'}}).directive("mwFilterableSearch",["$timeout","$animate","Loading","Detect",function(a,b,c,d){return{scope:{filterable:"=",mwDisabled:"=",property:"@"},templateUrl:"uikit/templates/mwComponents/mwFilterableSearch.html",link:function(c,e){b.enabled(!1,e.find(".search-indicator")),c.model=c.filterable.properties[c.property],c.inputLength=0,c.isMobile=d.isMobile();var f,g=function(){return c.filterable.applyFilters()},h=function(){c.searching=!0,a.cancel(f),f=a(function(){g().then(function(){a.cancel(f),c.searching=!1},function(){c.searching=!1})},500)};c.search=function(a){a&&13!==a.keyCode?c.isMobile||h():g()},c.reset=function(){c.model.value="",g()}}}}]).directive("mwRating",function(){return{restrict:"A",scope:!0,template:'<i ng-repeat="star in stars" ng-class="star.state" class="fa"></i>',link:function(a,b,c){b.addClass("mw-star-rating"),a.stars=[];var d=function(){a.stars=[];var b=a.$eval(c.mwRating)||0,d=a.$eval(c.max)||5;b>d&&(b=d),0>b&&(b=0);for(var e=0;e<Math.floor(b);e++)a.stars.push({state:"fa-star"});for(b-Math.floor(b)>=.5&&a.stars.push({state:"fa-star-half-full"});c.max&&a.stars.length<d;)a.stars.push({state:"fa-star-o"})};c.$observe("mwRating",function(){d()}),c.$observe("max",function(){d()})}}}).directive("mwButtonHelp",["i18n",function(a){return{restrict:"A",scope:!0,link:function(a,c){var d;c.addClass("mwButtonHelp");var e=b.element("<div>").addClass("help-icon rln-icon support hidden-sm hidden-xs");c.prepend(e);var f=function(){d=b.element("<div>"+a.helpText+"<ul></ul></div>").addClass("mwButtonPopover popover"),b.forEach(a.hintsToShow,function(a){d.find("ul").append("<li>"+a.text+"</li>")})};e.hover(function(){f();var a=b.element(this).offset();b.element("body").append(d),d.css("top",a.top-d.height()/2+10-b.element(document).scrollTop()),d.css("left",a.left+40)},function(){b.element("body > .mwButtonPopover").remove()}),a.$watch("hintsToShow",function(a){a.length?e.removeClass("hidden"):e.addClass("hidden")}),a.$on("$destroy",function(){d&&d.remove()})},controller:["$scope",function(c){c.registeredHints=[],c.hintsToShow=[],c.helpText=a.get("common.buttonHelp"),c.$on("i18n:localeChanged",function(){c.helpText=a.get("common.buttonHelp")});var d=function(){c.hintsToShow=[],b.forEach(c.registeredHints,function(a){a.condition&&c.hintsToShow.push(a)})};this.register=function(a){c.$watch(function(){return a.condition},d),c.registeredHints.push(a)}}]}}]).directive("mwButtonHelpCondition",function(){return{restrict:"A",require:"^mwButtonHelp",scope:{condition:"=mwButtonHelpCondition",text:"@mwButtonHelpText"},link:function(a,b,c,d){d.register(a)}}}).directive("mwLinkShow",function(){return{restrict:"A",scope:{link:"@mwLinkShow"},template:'<a ng-href="{{ link }}" class="btn btn-default btn-sm mw-link-show" mw-stop-propagation="click"><span mw-icon="fa-angle-right"></span></a>'}}).directive("mwOptionGroup",function(){return{scope:{title:"@",description:"@",icon:"@",mwDisabled:"="},transclude:!0,templateUrl:"uikit/templates/mwComponents/mwOptionGroup.html",link:function(a,b){a.randomId=_.uniqueId("option_group_"),b.find("input").attr("id",a.randomId)}}}).directive("mwToggle",["$timeout",function(a){return{scope:{mwModel:"=",mwDisabled:"=",mwChange:"&"},replace:!0,templateUrl:"uikit/templates/mwComponents/mwToggle.html",link:function(b){b.toggle=function(c){b.mwModel!==c&&(b.mwModel=!b.mwModel,a(function(){b.mwChange({value:b.mwModel})}))}}}}]).directive("mwTimeline",function(){return{transclude:!0,replace:!0,template:'<div class="mw-timeline timeline clearfix"><hr class="vertical-line"><div class="content" ng-transclude></div></div>'}}).directive("mwTimelineFieldset",["$q",function(a){return{scope:{mwTitle:"@",collapsable:"="},transclude:!0,replace:!0,templateUrl:"uikit/templates/mwComponents/mwTimelineFieldset.html",controller:["$scope",function(b){b.entries=[],this.register=function(a){_.findWhere(b.entries,{$id:a.$id})||b.entries.push(a)},b.entriesVisible=!0,b.toggleEntries=function(){if(b.collapsable){var c=[];b.entries.forEach(function(a){b.entriesVisible?c.push(a.hide()):c.push(a.show())}),b.entriesVisible?a.all(c).then(function(){b.entriesVisible=!b.entriesVisible}):b.entriesVisible=!b.entriesVisible}},b.hiddenEntriesText=function(){return b.entries.length>1?"common.entriesHiddenPlural":"common.entriesHiddenSingular"}}]}}]).directive("mwTimelineEntry",["$q",function(a){return{transclude:!0,replace:!0,template:'<li class="timeline-entry"><span class="bubble"></span><div ng-transclude></div></li>',scope:!0,require:"^mwTimelineFieldset",link:function(b,c,d,e){e.register(b),b.hide=function(){var b=a.defer();return c.fadeOut("slow",function(){b.resolve()}),b.promise},b.show=function(){var b=a.defer();return c.fadeIn("slow",function(){b.resolve()}),b.promise}}}}]).directive("mwDraggable",["$timeout",function(a){return{restrict:"A",scope:{mwDragData:"=",mwDragstart:"&",mwDragend:"&",mwDropEffect:"@"},link:function(b,c){c.attr("draggable",!0),c.addClass("draggable",!0),b.mwDragstart&&c.on("dragstart",function(c){c.originalEvent.dataTransfer.setData("text",JSON.stringify(b.mwDragData)),c.originalEvent.dataTransfer.effectAllowed=b.mwDropEffect,a(function(){b.mwDragstart({event:c,dragData:b.mwDragData})})}),c.on("dragend",function(c){b.mwDragend&&a(function(){b.mwDragend({event:c})})})}}}]).directive("mwDroppable",["$timeout",function(a){return{restrict:"A",scope:{mwDropData:"=",mwDragenter:"&",mwDragleave:"&",mwDragover:"&",mwDrop:"&",disableDrop:"="},link:function(b,c){c.addClass("droppable");var d=function(a){var b=a.originalEvent.dataTransfer.getData("text");return b?JSON.parse(b):void 0};b.mwDragenter&&c.on("dragenter",function(d){b.disableDrop!==!0&&c.addClass("drag-over"),a(function(){b.mwDragenter({event:d})})}),b.mwDragleave&&c.on("dragleave",function(d){c.removeClass("drag-over"),a(function(){b.mwDragleave({event:d})})}),b.mwDrop&&c.on("drop",function(e){c.removeClass("drag-over"),e.stopPropagation&&e.stopPropagation();var f=d(e);return a(function(){b.mwDrop({event:e,dragData:f,dropData:b.mwDropData})}),!1});var e=function(a){return b.disableDrop!==!0?(a.preventDefault&&a.preventDefault(),!1):void 0};c.on("dragover",e),b.mwDragover&&c.on("dragover",function(c){a(function(){b.mwDragover({event:c})})}),b.$on("$destroy",function(){c.off()})}}}]).directive("mwTextCollapse",["$filter",function(a){return{restrict:"A",scope:{mwTextCollapse:"@",length:"=",markdown:"="},templateUrl:"uikit/templates/mwComponents/mwTextCollapse.html",link:function(b){b.length&&"number"==typeof b.length?b.defaultLength=b.length:b.defaultLength=200,b.filterLength=b.defaultLength,b.text=function(){return a("reduceStringTo")(b.mwTextCollapse,b.filterLength)},b.showButton=!1,b.mwTextCollapse.length>b.defaultLength&&(b.showButton=!0),b.showLessOrMore=function(){return b.filterLength===b.defaultLength?"common.showMore":"common.showLess"},b.toggleLength=function(){b.filterLength===b.defaultLength?delete b.filterLength:b.filterLength=b.defaultLength}}}}]).directive("mwInfiniteScroll",["$window","$document",function(a,c){return{restrict:"A",link:function(d,e,f){var g,h,i,j,k,l=!1;if(f.mwListCollection?g=d.$eval(f.mwListCollection).getCollection():f.collection?g=d.$eval(f.collection):console.warn("No collection was found for the infinite scroll pleas pass it as scope attribute"),g&&(!g||g.filterable)){var m=function(){!l&&k.scrollTop()>=j.height()-k.height()-100&&g.filterable.hasNextPage()&&(l=!0,g.filterable.loadNextPage().then(function(){l=!1}))},n=function(){!l&&g.filterable.hasNextPage()&&k[0].scrollHeight>0&&k[0].scrollHeight-k.scrollTop()-k[0].clientHeight<2&&(l=!0,g.filterable.loadNextPage().then(function(){l=!1}))};e.parents(".modal").length?(k=e.parents(".modal-body"),i=n):(j=b.element(c),k=b.element(a),i=m),h=_.throttle(i,500),k.on("scroll",h),d.$on("$destroy",function(){k.off("scroll",h)})}}}}]).directive("mwViewChangeLoader",["$rootScope",function(a){return{replace:!0,template:'<div class="mw-view-change-loader" ng-if="model.loading"><div class="spinner"></div></div>',link:function(b){b.model={loading:!1};var c=a.$on("$locationChangeSuccess",function(){b.model.loading=!0}),d=a.$on("$routeChangeSuccess",function(){b.model.loading=!1}),e=a.$on("$routeChangeError",function(){b.model.loading=!1});b.$on("$destroy",function(){c(),d(),e()})}}}]).directive("mwCollapsable",function(){return{transclude:!0,scope:{mwCollapsable:"=",title:"@mwTitle"},templateUrl:"uikit/templates/mwComponents/mwCollapsable.html",link:function(a,b){a.viewModel={},a.viewModel.collapsed=!1,a.mwCollapsable===!1&&(a.viewModel.collapsed=!0);var c=b.parents(".mw-collapsable").length;c&&b.css("margin-left",20*c+"px"),a.toggle=function(){a.viewModel.collapsed=!a.viewModel.collapsed}}}}).service("mwMarkdown",function(){var a=new window.showdown.Converter({headerLevelStart:3,smoothLivePreview:!0,extensions:[function(){return[{type:"lang",regex:"â€¢",replace:"-"},{type:"lang",filter:function(a){return a.replace(/https?:\/\/\S*/g,function(a){return"<"+a+">"})}}]}]});return{convert:function(b){return a.makeHtml(b)}}}).directive("mwMarkdownPreview",function(){return{scope:{mwModel:"=mwMarkdownPreview"},templateUrl:"uikit/templates/mwComponents/mwMarkdownPreview.html",link:function(a,b){b.addClass("mw-markdown-preview")}}}).directive("mwMarkdown",["$sanitize","mwMarkdown",function(a,b){return{restrict:"AE",link:function(c,d,e){if(e.mwMarkdown)c.$watch(e.mwMarkdown,function(c){try{var e=c?a(b.convert(c)):"";d.html(e)}catch(f){d.text(c)}});else{var f=a(b.convert(d.text()));d.html(f)}}}}]).directive("mwBreadCrumbsHolder",function(){return{transclude:!0,template:'<div class="mw-bread-crumbs" ng-transclude></div>'}}).directive("mwBreadCrumb",function(){return{scope:{url:"@",title:"@"},templateUrl:"uikit/templates/mwComponents/mwBreadCrumb.html"}}),b.module("mwComponentsBb",[]).directive("mwFilterableSearchBb",["$timeout",function(a){return{scope:{collection:"=",property:"@",customUrlParameter:"@",mwDisabled:"=",placeholder:"@"},templateUrl:"uikit/templates/mwComponentsBb/mwFilterableSearch.html",link:function(b,c){var d=c.find("input"),e=function(a){if(b.customUrlParameter)b.collection.filterable.customUrlParams[b.customUrlParameter]=a;else{var c={};c[b.property]=a,b.collection.filterable.setFilters(c)}};b.viewModel={searchVal:""},b.search=function(){return b.searching=!0,e(b.viewModel.searchVal),b.collection.fetch()["finally"](function(){a(function(){b.searching=!1},500)})},b.reset=function(){b.viewModel.searchVal="",b.search()},b.hasValue=function(){return d.val().length>0;
},b.keyUp=function(){b.searching=!0},b.focus=function(){d.focus()},c.on("focus","input[type=text]",function(){c.children().addClass("is-focused")}),c.on("blur","input[type=text]",function(){c.children().removeClass("is-focused")})}}}]).directive("mwEmptyStateBb",function(){return{restrict:"A",replace:!0,scope:{collection:"=",text:"@mwEmptyStateBb",button:"&",buttonText:"@"},transclude:!0,templateUrl:"uikit/templates/mwComponentsBb/mwEmptyStateBb.html",link:function(a){a.collection?a.showEmptyState=function(){return 0===a.collection.length&&!a.collection.filterable.filterIsSet}:a.showEmptyState=function(){return!0}}}}).directive("mwVersionSelector",function(){return{restrict:"A",scope:{currentVersionModel:"=",versionCollection:"=",versionNumberKey:"@",url:"@"},templateUrl:"uikit/templates/mwComponentsBb/mwVersionSelector.html",link:function(a){a.versionNumberKey=a.versionNumberKey||"versionNumber",a.getUrl=function(b){return a.url.replace("VERSION_UUID",b)}}}}),b.module("mwUI").directive("mwLeadingZero",function(){return{require:"ngModel",link:function(a,b,c,d){d.$formatters.unshift(function(a){return 10>a?"0"+a:a})}}}).directive("mwDatePicker",["$rootScope","$compile","$interval","$timeout","i18n",function(a,b,c,d,e){return{templateUrl:"uikit/templates/mwDatePicker.html",scope:{mwModel:"=",mwRequired:"=",showTimePicker:"=",options:"="},link:function(b,f){var g,h,i,j={clearBtn:!b.mwRequired};b.viewModel={date:null,hours:null,minutes:null,datepickerIsOpened:!1},b.canChange=function(a,c){var d=b.options||{},e=+new Date(b.mwModel);if(a=a||0,"MINUTES"===c?a=60*a*1e3:"HOURS"===c&&(a=60*a*60*1e3),d.startDate){var f=+new Date(d.startDate);return 0>a?e+a>=f:new Date(e).setHours(0,0,0,0)>=new Date(f).setHours(0,0,0,0)}if(d.endDate){var g=+new Date(d.endDate);return a>0?g>=e+a:new Date(e).setHours(0,0,0,0)<=new Date(g).setHours(0,0,0,0)}return!0},b.increment=function(a,c,d){var e=b.viewModel[a];d>e?e++:e=c,b.viewModel[a]=e},b.startIncrementCounter=function(){var a=arguments;h=c(function(){b.increment.apply(this,a)}.bind(this),200)},b.stopIncrementCounter=function(){c.cancel(h)},b.decrement=function(a,c,d){var e=b.viewModel[a];e>c?e--:e=d,b.viewModel[a]=e},b.startDecrementCounter=function(){var a=arguments;i=c(function(){b.decrement.apply(this,a)}.bind(this),200)},b.stopDecrementCounter=function(){c.cancel(i)};var k=function(a){d(function(){if(a.dates.length>0){var c=new Date(a.getDate());b.viewModel.hours?c.setHours(b.viewModel.hours):b.viewModel.hours=c.getHours(),b.viewModel.minutes?c.setMinutes(b.viewModel.minutes):b.viewModel.minutes=c.getMinutes(),b.mwModel=c,b.viewModel.date=c.toLocaleDateString()}else b.viewModel.date=null,b.viewModel.hours=null,b.viewModel.minutes=null,b.mwModel=null})},l=function(a){a.on("changeDate",k.bind(this,a.data().datepicker)),a.on("show",function(){d(function(){b.viewModel.datepickerIsOpened=!0})}),a.on("hide",function(){d(function(){b.viewModel.datepickerIsOpened=!1})})},m=function(a,c,d){if(c){c=new Date(c);var e=c.toLocaleDateString(),f=c.getHours(),h=c.getMinutes();a.val(e),b.viewModel.hours=f,b.viewModel.minutes=h,b.viewModel.date=e,d.setDate(c),d.update(),g.val(e)}},n=function(a){var c;g&&g.data().datepicker&&g.data().datepicker.remove(),c=f.find(".date-picker"),g=c.datepicker(_.extend(j,a)),m(c,b.mwModel,g.data().datepicker),l(g)},o=function(){var a="en";"de_DE"===e.getActiveLocale().id&&(a="de"),n({language:a})};a.$on("i18n:localeChanged",o),o();var p=function(a){g&&a&&k(g.data().datepicker)};b.$watch("viewModel.minutes",p),b.$watch("viewModel.hours",p),b.$watchCollection("options",function(a){a&&n(a)}),f.on("mouseout",".number-spinner",function(){b.stopDecrementCounter(),b.stopIncrementCounter()})}}}]),function(){var a=function(){return{restrict:"E",require:"?^mwFormInput",link:function(a,b,c,d){var e=d,f=["checkbox","radio"],g=-1===f.indexOf(c.type);g&&b.addClass("form-control"),g&&e&&e.buildValidationMessages(b)}}},c=function(){return{restrict:"E",require:"?ngModel",link:function(a,c,d,e){var f=e,g=["checkbox","radio","hidden","file"],h=-1===g.indexOf(d.type),i=255,j=2147483647;d.type||(i=4e3),"number"!==d.type&&f&&h&&!f.$validators.maxlength&&!d.ngMaxlength&&(d.$set("ngMaxlength",i),f.$validators.maxlength=function(a,b){return 0>i||f.$isEmpty(a)||b.length<=i}),"number"!==d.type||e.$validators.max||(d.$set("max",j),e.$validators.max=function(a){return e.$isEmpty(a)||b.isUndefined(j)||j>=a})}}};b.module("mwForm",[]).provider("mwValidationMessages",function(){var a={},b={},c={},d={},e=function(b,d){"function"==typeof d?c[b]=d:a[b]=d};this.registerValidator=function(b,d){if(a[b]||c[b])throw new Error("The key "+b+" has already been registered");e(b,d)},this.$get=["$rootScope","i18n",function(f,g){var h=function(){_.pairs(a).forEach(function(a){var c=a[0],d=a[1];g.translationIsAvailable(d)?b[c]=g.get(d):b[c]=d})},i=function(){_.pairs(c).forEach(function(a){var b=a[0],c=a[1];d[b]=c()})},j=function(){h(),i(),f.$broadcast("mwValidationMessages:change")};return j(),f.$on("i18n:localeChanged",function(){j()}),{getRegisteredValidators:function(){return _.extend(b,d)},updateMessage:function(b,d){if(!a[b]&&!c[b])throw new Error("The key "+b+" is not available. You have to register it first via the provider");e(b,d),j()}}}]}).directive("mwFormInput",["i18n",function(a){return{restrict:"A",transclude:!0,require:"^form",scope:{label:"@",tooltip:"@",hideErrors:"="},templateUrl:"uikit/templates/mwForm/mwFormInput.html",link:function(a,b,c,d){var e=function(){return d&&a.elementName&&d[a.elementName]?d[a.elementName]:void 0};a.isInvalid=function(){var a=e();return a?a.$invalid:!1},a.isDirty=function(){var a=e();return a?a.$dirty:!1},a.getCurrentErrors=function(){var a=e();return a?a.$error:void 0},a.isRequiredError=function(){var a=e();return a&&a.$error?a.$error.required:!1},a.isRequired=function(){var a=b.find("input[required],select[required],textarea[required]");return a.length>0}},controller:["$scope","mwValidationMessages",function(b,c){var d=this;d.element=null;var e=function(d){var e=c.getRegisteredValidators(),f={required:a.get("errors.isRequired"),email:a.get("errors.hasToBeAnEmail"),pattern:a.get("errors.hasToMatchPattern"),url:a.get("errors.validUrl"),min:a.get("errors.minValue",{count:d.attr("min")}),minlength:a.get("errors.minLength",{count:d.attr("ng-minlength")}),max:a.get("errors.maxValue",{count:d.attr("max")}),maxlength:a.get("errors.maxLength",{count:d.attr("ng-maxlength")}),phone:a.get("errors.phoneNumber"),hex:a.get("errors.hex"),unique:a.get("errors.notUnique"),match:a.get("errors.doesNotMatch"),emailOrPlaceholder:a.get("errors.emailOrPlaceholder"),itunesOrHttpLink:a.get("errors.itunesOrHttpLink")};b.validationValues=_.extend(f,e)};this.buildValidationMessages=function(a){d.element||(d.element=a,b.$watch(function(){return a.attr("name")},function(a){a&&(b.elementName=a)}),b.$watch(function(){return a.attr("mw-validation-message")},function(b){b&&e(a)}),e(a),b.$on("mwValidationMessages:change",function(){e(a)}))}}]}}]).directive("mwFormWrapper",function(){return{restrict:"A",replace:!0,transclude:!0,scope:{label:"@",tooltip:"@"},templateUrl:"uikit/templates/mwForm/mwFormWrapper.html",link:function(a,b){a.isRequired=function(){var a=b.find("input[required],select[required],textarea[required]");return a.length>0}}}}).directive("mwFormMultiSelect",function(){return{restrict:"A",transclude:!0,require:"^?form",scope:{model:"=",options:"=",query:"=filter",mwRequired:"="},templateUrl:"uikit/templates/mwForm/mwFormMultiSelect.html",controller:["$scope",function(a){if(b.isArray(a.model)||(a.model=[]),b.isArray(a.options)){var c={};a.options.forEach(function(a){c[a]=a}),a.options=c}a.getObjectSize=function(a){return _.size(a)},a.filter=function(c){var d={};return b.forEach(c,function(b,c){(!a.query||!b||b.match(a.query.toLowerCase())||b.match(a.query.toUpperCase()))&&(d[c]=b)}),d},a.toggleKeyIntoModelArray=function(b){a.model=a.model||[],a.model.indexOf(b)>=0?(a.model.splice(a.model.indexOf(b),1),0===a.model.length&&delete a.model):a.model.push(b)}}],link:function(a,b,c,d){a.showRequiredMessage=function(){return(!a.model||a.model.length<1)&&a.required},a.setDirty=function(){d&&d.$setDirty()}}}}).directive("mwFormMultiSelect2",function(){return{restrict:"A",transclude:!0,require:"^?form",scope:{mwCollection:"=",mwOptionsCollection:"=",mwOptionsLabelKey:"@",mwOptionsLabelI18nPrefix:"@",mwRequired:"=",mwDisabled:"="},templateUrl:"uikit/templates/mwForm/mwFormMultiSelect2.html",link:function(a,b,c,d){0===a.mwOptionsCollection.length&&a.mwOptionsCollection.fetch(),a.toggleModel=function(b){var c=a.mwCollection.findWhere(b.toJSON());c?a.mwCollection.remove(c):a.mwCollection.add(b.toJSON()),d&&d.$setDirty()}}}}).directive("mwFormCheckbox",function(){return{restrict:"A",replace:!0,transclude:!0,scope:{mwClass:"@class",label:"@",tooltip:"@",badges:"@"},templateUrl:"uikit/templates/mwForm/mwFormCheckbox.html",link:function(a){if(a.badges){var c=function(){a.typedBadges=[];var c=a.badges.split(",");b.forEach(c,function(b){var c="info";b.toLowerCase().indexOf("android")>-1&&(c="android"),b.toLowerCase().indexOf("ios")>-1&&(c="ios"),b.toLowerCase().indexOf("knox")>-1&&(c="knox"),b.toLowerCase().indexOf("-knox-")>-1&&(b="KNOX",c="notsafe"),b.toLowerCase().indexOf("knox")>-1&&b.toLowerCase().indexOf("android")>-1&&(c="multi"),a.typedBadges.push({text:b,type:c})})};a.$watch("badges",c)}}}}).directive("mwCustomSelect",function(){return{require:"^?ngModel",link:function(a,c){var d=b.element('<span class="custom-select mw-select"></span>'),e=function(){c.wrap(d),c.addClass("custom")};e()}}}).directive("mwCustomCheckbox",function(){return{restrict:"A",link:function(a,c,d){d.$observe("radio",function(a){a===!0&&c.parent().addClass("round")});var e=function(){var a=b.element('<span class="custom-checkbox mw-checkbox"></span>'),d=b.element('<span class="state-indicator"></span>'),e=b.element('<span class="state-focus-indicator"></span>');c.wrap(a),d.insertAfter(c),e.insertAfter(d)};!function(){a.$on("$destroy",function(){c.off(),c.parent(".mw-checkbox").remove()}),e()}()}}}).directive("mwCustomRadio",function(){return{restrict:"A",link:function(a,c){var d=function(){var a=b.element('<span class="custom-radio mw-radio"></span>'),d=b.element('<span class="state-indicator"></span>'),e=b.element('<span class="state-focus-indicator"></span>');c.wrap(a),d.insertAfter(c),e.insertAfter(d)};!function(){a.$on("$destroy",function(){c.off(),c.parent(".mw-radio").remove()}),d()}()}}}).directive("mwFormValidation",function(){return{restrict:"A",replace:!0,transclude:!0,require:["^mwFormInput","^form"],scope:{validation:"@mwFormValidation"},template:'<span class="help-block" ng-show="isValid()" ng-transclude></span>',link:function(a,b,c,d){var e=d[0],f=e.element.attr("name"),g=d[1],h=!1;if(!f)throw h=!0,new Error("element doesn't have name attribute");if(g&&!g[f])throw h=!0,new Error("element "+f+" not found");a.isValid=function(){return h||!g?!1:g[f]?g[f].$error[a.validation]:void 0}}}}).directive("form",function(){return{restrict:"E",link:function(a,c){c.addClass("form-horizontal"),c.attr("novalidate","true");var d=b.element('<!-- fake fields are a workaround for chrome autofill getting the wrong fields --><input style="display:none" type="text" name="fakeusernameremembered"/><input style="display:none" type="password" name="fakepasswordremembered"/>');c.prepend(d)}}}).directive("mwFormLeaveConfirmation",["$window","$document","$location","i18n","Modal","$compile",function(a,b,c,d,e,f){return{require:"^form",link:function(a,b,c,e){a.form=e,a.text=d.get("common.confirmModal.description");var g=f('<div mw-leave-confirmation="form.$dirty" text="{{text}}"></div>')(a);b.append(g),a.$on("$destroy",function(){a.form.$dirty=!1})}}}]).directive("mwFormActions",["Loading","$route",function(a,c){return{replace:!0,scope:{save:"&",cancel:"&",showSave:"=",showCancel:"="},templateUrl:"uikit/templates/mwForm/mwFormActions.html",link:function(d,e,f){d.isLoading=a.isLoading,d.form=e.inheritedData("$formController"),d.hasCancel=b.isDefined(f.cancel),d.hasSave=b.isDefined(f.save),d._showSave=!0,d._showCancel=!0,d.executeDefaultCancel="true"===f.cancel,d.$watch("showSave",function(a){b.isDefined(a)&&(d._showSave=a)}),d.$watch("showCancel",function(a){b.isDefined(a)&&(d._showCancel=a)});var g=function(a){d.form&&d.form.$setPristine(),d.$eval(a)};d.saveFacade=function(){g(d.save)},d.cancelFacade=function(){g(d.cancel&&d.executeDefaultCancel?function(){c.reload()}:d.cancel)}}}}]).directive("select",a).directive("input",a).directive("input",c).directive("textarea",a).directive("textarea",c).directive("mwPasswordToggler",["$compile",function(a){return{restrict:"A",link:function(c,d){var e=function(){var e=b.element('<div class="mw-password-toggler input-group"></div>'),f=a('<span class="input-group-addon toggler-btn clickable" ng-click="togglePassword()" ng-if="showToggler()"><span ng-if="isPassword()" mw-icon="fa-eye"></span><span ng-if="!isPassword()" mw-icon="fa-eye-slash"></span></span>')(c);d.wrap(e),f.insertAfter(d)};c.isPassword=function(){return"password"===d.attr("type")},c.togglePassword=function(){c.isPassword()?d.attr("type","text"):d.attr("type","password")},c.showToggler=function(){return!d.is(":disabled")},c.$watch(c.showToggler,function(a){var b=d.parent(".mw-password-toggler");a?b.addClass("input-group"):b.removeClass("input-group")}),e()}}}])}(),b.module("mwFormBb",[]).directive("mwFormMultiSelectBb",function(){return{restrict:"A",transclude:!0,require:"^?form",scope:{model:"=",collection:"=",mwOptionsKey:"@",translationPrefix:"@",mwRequired:"=",disabledCollection:"="},templateUrl:"uikit/templates/mwFormBb/mwFormMultiSelect.html",link:function(a,b,c,d){if(a.optionsKey=a.mwOptionsKey||"key",!(a.collection instanceof window.mCAP.Collection))throw new Error("mwFormMultiSelect: collection attribute has to be a collection");if(a.disabledCollection&&!(a.disabledCollection instanceof window.mCAP.Collection))throw new Error("mwFormMultiSelect: disabledCollection attribuet has to be a collection");var e=function(b){return a.model.indexOf(b)>=0?(a.model.splice(a.model.indexOf(b),1),0===a.model.length&&delete a.model,!0):!1};a.disabledCollection&&a.disabledCollection.each(function(b){e(b.get(a.optionsKey))}),a.isDisabled=function(b){return a.disabledCollection?!!a.disabledCollection.get(b):void 0},a.toggleKeyIntoModelArray=function(b){a.model=a.model||[],e(b)||a.model.push(b)},a.showRequiredMessage=function(){return(!a.model||a.model.length<1)&&a.mwRequired},a.setDirty=function(){d&&d.$setDirty()}}}}).directive("mwFormRadioGroupBb",function(){return{restrict:"A",transclude:!0,require:"^?form",scope:{mwModel:"=",mwOptionsCollection:"=",mwOptionsKey:"@",mwOptionsLabelKey:"@",mwOptionsLabelI18nPrefix:"@",mwRequired:"=",mwDisabled:"=",name:"@"},templateUrl:"uikit/templates/mwFormBb/mwFormRadioGroup.html",link:function(a){a.optionsKey=a.mwOptionsKey||"key",0===a.mwOptionsCollection.length&&a.mwOptionsCollection.fetch()}}}).directive("mwFormSelectBb",["i18n",function(a){return{restrict:"A",transclude:!0,require:"^?form",scope:{mwModel:"=",mwOptionsCollection:"=",mwOptionsKey:"@",mwOptionsLabelKey:"@",mwOptionsLabelI18nPrefix:"@",mwRequired:"=",mwDisabled:"=",mwChange:"&",mwPlaceholder:"@placeholder",mwNullLabel:"@",mwAutoFetch:"=",name:"@"},templateUrl:"uikit/templates/mwFormBb/mwFormSelect.html",link:function(c){c.optionsKey=c.mwOptionsKey||"key",c.labelKey=c.mwOptionsLabelKey||"label",c.viewModel={val:""},c.getKey=function(a){return a.get(c.optionsKey)},c.getLabel=function(b){return null===b.get(c.optionsKey)?b.get(c.labelKey):c.mwOptionsLabelI18nPrefix?a.get(c.mwOptionsLabelI18nPrefix+"."+c.getKey(b)):c.getKey(b)},c.getSelectedModel=function(a){var b={};return b[c.optionsKey]=a,c.mwOptionsCollection.findWhere(b)};var d=function(){if(!c.mwRequired){var a={},b=null,d={};d[c.optionsKey]=b,a[c.optionsKey]=b,a[c.labelKey]=c.mwNullLabel||"",c.mwOptionsCollection.findWhere(d)||c.mwOptionsCollection.add(a)}};c.mwModel instanceof window.Backbone.Model?(c.viewModel.val=c.mwModel.get(c.optionsKey)||null,c.mwOptionsCollection.on("add",function(){c.viewModel.val&&c.getSelectedModel(c.viewModel.val)&&c.mwModel.set(c.getSelectedModel(c.viewModel.val).toJSON())}),c.$watch("viewModel.val",function(a){a&&c.getSelectedModel(a)?c.mwModel.set(c.getSelectedModel(a).toJSON()):c.mwModel.clear()})):(c.viewModel.val=c.mwModel||null,c.$watch("mwModel",function(a){(a||null===a)&&(c.viewModel.val=a)}),c.$watch("viewModel.val",function(a){c.mwModel=a})),(c.mwAutoFetch||b.isUndefined(c.mwAutoFetch))&&0===c.mwOptionsCollection.length&&c.mwOptionsCollection.fetch(),c.mwRequired||(d(),c.mwOptionsCollection.on("reset sync",d,this))}}}]).directive("mwMultiSelectBoxes",["i18n",function(a){return{restrict:"A",scope:{mwOptionsCollection:"=",mwCollection:"=",labelProperty:"@mwOptionsLabelKey",i18nPrefix:"@mwOptionsLabelI18nPrefix",mwRequired:"=",mwDisabled:"=",name:"@hiddenFormElementName",placeholder:"@"},templateUrl:"uikit/templates/mwFormBb/mwMultiSelectBoxes.html",link:function(b){b.viewModel={tmpModel:new b.mwCollection.model},b.add=function(a){b.mwCollection.add(a.toJSON())},b.remove=function(a){b.mwCollection.remove(a)},b.getLabel=function(c){var d=b.labelProperty?c.get(b.labelProperty):c.get("key");return b.i18nPrefix?a.get(b.i18nPrefix+"."+d):void 0},b.mwCollection.on("add",function(a){b.mwOptionsCollection.remove(a)}),b.mwCollection.on("remove",function(a){b.mwOptionsCollection.add(a.toJSON())}),b.mwCollection.each(function(a){b.mwOptionsCollection.remove(a)})}}}]),function(){var a=function(a,b){return a?!!a.match(b):!0};b.module("mwFormValidators",[]).directive("mwValidatePhone",function(){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f=/^\+(?:[0-9]){6,14}[0-9]$/,g=function(a){return a&&(a=a.replace(/[^ 0-9+]/g,"")),a},h=function(b){return a(b,f)};e.$validators.phone=h,e.$formatters.push(g)}}}).directive("mwValidateHex",function(){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f=/^(0x)?([0-9A-Fa-f])+$/,g=function(b){return e.$setValidity("hex",a(b,f)),b};e.$formatters.push(g),e.$parsers.push(g)}}}).directive("mwValidateCollectionOrModel",function(){return{restrict:"A",scope:{mwModel:"=mwValidateCollectionOrModel",mwRequired:"=",mwKey:"@"},require:"^?form",template:'<input type="text" ng-required="mwRequired" ng-model="model.tmp" name="{{uId}}" style="display: none">',link:function(a,b,c,d){var e=a.mwKey||"uuid";a.model={},a.uId=_.uniqueId("validator_");var f=function(){d&&d.$setDirty()},g=a.$watch("mwModel",function(){var b=a.mwModel;if(b){if(b instanceof window.Backbone.Collection)b.on("add remove reset",function(){b.length>0?a.model.tmp=b.first().get(e):a.model.tmp=void 0,f()}),b.length>0?a.model.tmp=b.first().get(e):a.model.tmp=void 0;else{if(!(b instanceof window.Backbone.Model))throw new Error("Value is neither a model nor a collection! Make its one of them",b);e=a.mwKey||b.idAttribute,b.on("change:"+e,function(){a.model.tmp=b.get(e),f()}),a.model.tmp=b.get(e)}g()}})}}}).directive("mwValidatePlaceholder",function(){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f=/\$\{.*\}/,g=function(b){return e.$setValidity("placeholder",a(b,f)),b};e.$formatters.push(g),e.$parsers.push(g)}}}).directive("mwValidatePlaceholderOrMail",function(){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+([.][a-zA-Z0-9_-]+)*[.][a-zA-Z0-9._-]+$/,g=/\$\{.+\}/;e.$validators.emailOrPlaceholder=function(b){return!(!a(b,f)&&!a(b,g))}}}}).directive("mwValidateMatch",function(){return{require:"ngModel",link:function(a,b,c,d){var e=b.inheritedData("$formController")[c.mwValidateMatch];d.$parsers.push(function(a){var b=!1;return a===e.$viewValue&&(b=!0),d.$setValidity("match",b),a}),e.$parsers.push(function(a){var b=!1;return a===d.$viewValue&&(b=!0),d.$setValidity("match",b),a})}}}).directive("mwValidateUniqueness",function(){return{require:"ngModel",link:function(a,c,d,e){var f;a.$watch(d.mwValidateUniqueness,function(a){f=a});var g=function(a){var c=!0;return b.isArray(f)&&f.length>0&&a&&e.$dirty&&(c=-1===f.indexOf(a)),e.$setValidity("unique",c),a};e.$parsers.unshift(g),e.$formatters.unshift(g)}}}).config(["mwValidationMessagesProvider",function(a){a.registerValidator("withoutChars","errors.withoutChar"),a.registerValidator("withoutChar","errors.withoutChars")}]).directive("mwValidateWithoutChar",["$parse","mwValidationMessages","i18n",function(a,b,c){return{require:"ngModel",link:function(d,e,f,g){var h,i=f.mwValidateWithoutChar;try{h=a(f.mwValidateWithoutChar)(d)}catch(j){}_.isArray(h)?(b.updateMessage("withoutChars",function(){return c.get("errors.withoutChars",{chars:'"'+h.join('", "')+'"'})}),g.$validators.withoutChars=function(a){var b=!0;return a&&h.forEach(function(c){b&&(b=a.indexOf(c)<0)}),b}):i&&(b.updateMessage("withoutChar",function(){return c.get("errors.withoutChar",{"char":i})}),g.$validators.withoutChar=function(a){var b=!0;return a&&(b=a.indexOf(i)<0),b})}}}]).config(["mwValidationMessagesProvider",function(a){a.registerValidator("onlyWordChars","errors.onlyWordChars")}]).directive("mwValidateWordChars",function(){return{require:"ngModel",link:function(a,b,c,d){d.$validators.onlyWordChars=function(a){return a?!a.match(/\W/g):!0}}}}).directive("mwValidateItunesOrHttpLink",function(){return{require:"ngModel",link:function(b,c,d,e){var f=/^(https?|itms|itms-apps):\/\/.+$/;e.$validators.itunesOrHttpLink=function(b){return a(b,f)}}}}).config(["mwValidationMessagesProvider",function(a){a.registerValidator("minValidDate","errors.minDate"),a.registerValidator("maxValidDate","errors.maxDate")}]).directive("mwValidateDate",["mwValidationMessages","i18n",function(a,b){return{require:"ngModel",link:function(c,d,e,f){f.$validators.minValidDate=function(a){var b=c.$eval(e.minDate),d=+new Date(a),f=+new Date(b);return!b||!a||d>f},f.$validators.maxValidDate=function(a){var b=c.$eval(e.maxDate),d=+new Date(a),f=+new Date(b);return!b||!a||f>d},e.$observe("minDate",function(d){d&&a.updateMessage("minValidDate",function(){return b.get("errors.minValidDate",{minDate:new Date(c.$eval(d)).toLocaleString()})})}),e.$observe("maxDate",function(d){d&&a.updateMessage("maxValidDate",function(){return b.get("errors.maxValidDate",{maxDate:new Date(c.$eval(d)).toLocaleString()})})})}}}])}(),b.module("mwHelper",[]).directive("mwStopPropagation",function(){return{restrict:"A",link:function(a,b,c){if(!c.mwStopPropagation)throw new Error('Directive mwStopPropagation: This directive must have an event name as attribute e.g. mw-stop-propagation="keyup"');b.on(c.mwStopPropagation,function(a){a.stopPropagation()})}}}).directive("mwPreventDefault",function(){return{restrict:"A",link:function(a,b,c){if(!c.mwPreventDefault)throw new Error('Directive mwPreventDefault: This directive must have an event name as attribute e.g. mw-prevent-default="click"');b.on(c.mwPreventDefault,function(a){a.preventDefault()})}}}).directive("mwSetDirtyOn",function(){return{restrict:"A",scope:{mwSetDirtyOn:"@"},require:"^form",link:function(a,b,c,d){b.on(a.mwSetDirtyOn,function(){d.$setDirty()})}}}).service("mwDefaultFocusService",function(){var a=function(){var a=[];this.register=function(b,c){a.push({id:b,el:c,active:!1})};var b=function(b,c){var d=_.findWhere(a,{id:b}),e=_.indexOf(a,d);e>=0&&(a[e]=c)};this.setFocus=function(c){var d=_.findWhere(a,{id:c});if(this.getFocusedField()&&this.getFocusedField().id!==c)throw new Error("There can be only one focused field");d&&(d.active=!0,b(d))},this.removeFocus=function(c){var d=_.findWhere(a,{id:c});d&&(d.active=!1,b(d))},this.toggleFocus=function(c){var d=_.findWhere(a,{id:c});d&&(d.active=!d.active,b(d))},this.getFocusedField=function(){return _.findWhere(a,{active:!0})},this.remove=function(b){var c=_.findWhere(a,{id:b}),d=_.indexOf(a,c);d>=0&&a.splice(d,1)}};return new a}).directive("mwDefaultFocus",["mwDefaultFocusService",function(a){return{restrict:"A",scope:{isFocused:"=mwDefaultFocus"},link:function(b,c){var d=_.uniqueId("focus_field");a.register(d,c);var e=function(){if(!c.is(":focus"))try{a.setFocus(d),c[0].focus(),window.requestAnimFrame(e)}catch(b){console.warn(b)}};b.$watch("isFocused",function(b){b?window.requestAnimFrame(e):(c[0].blur(),a.removeFocus(d))}),b.$on("$destroy",function(){a.remove(d)})}}}]).directive("mwLeaveConfirmation",["$window","$document","$location","$rootScope","i18n","Modal",function(a,c,d,e,f,g){return{scope:{alertBeforeLeave:"=mwLeaveConfirmation",text:"@"},link:function(c){var d=g.create({templateUrl:"uikit/templates/mwForm/mwLeaveConfirmation.html",scope:c}),f=function(a,b){c.alertBeforeLeave?(d.show(),a.preventDefault(),c.next=b):c.changeLocationOff()};if(c.stay=function(){d.hide()},c["continue"]=function(){c.next&&(c.changeLocationOff(),d.hide().then(function(){document.location.href=c.next,c.next=null}))},c.changeLocationOff=e.$on("$locationChangeStart",f),a.onbeforeunload=function(){return c.alertBeforeLeave&&e.leaveConfirmationEnabled?c.text:void 0},!b.isDefined(c.text))throw new Error("Please specify a text in the text attribute");e.leaveConfirmationEnabled=!0}}}]).service("LayoutWatcher",["$timeout","$window",function(a,c){var d=[],e=function(){d.forEach(function(a){a.callback.apply(a.scope)})};return b.element("body").on("DOMNodeInserted",_.throttle(e,300)),b.element("body").on("DOMNodeRemoved",_.throttle(e,300)),b.element(c).on("resize",_.throttle(e,300)),a(e,500),{registerCallback:function(a,b){if("function"!=typeof a)throw new Error("Callback has to be a function");var c={callback:a,scope:b};d.push(c)}}}]).directive("mwSetFullScreenHeight",["LayoutWatcher",function(a){return{restrict:"A",scope:{subtractElements:"=",offset:"@"},link:function(c,d){d.addClass("mw-full-screen-height");var e=function(){var a=b.element(window).height();c.subtractElements.forEach(function(c){var d=b.element(c);if(d){var e={top:parseInt(d.css("padding-top"),10),bottom:parseInt(d.css("padding-bottom"),10)};a-=d.height(),a-=e.top,a-=e.bottom}}),c.offset&&(a-=c.offset),d.css("height",a)};a.registerCallback(e)}}}]).directive("mwInvertModelValue",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){return"boolean"==typeof a?!a:a};d.$parsers.push(e),d.$formatters.push(e)}}}).directive("mwRemoveXs",["Detect",function(a){return{priority:1,link:function(b,c){a.isSmartphone()&&(c.remove(),b.$destroy())}}}]).directive("mwRemoveMd",["Detect",function(a){return{priority:1,link:function(b,c){(a.isSmartphone()||a.isTablet())&&(c.remove(),b.$destroy())}}}]).directive("mwAutofillCheck",["$interval",function(a){return{restrict:"A",link:function(b,c){var d=c.find("input"),e=null;d.on("keyup",function(){null===e&&(e=a(function(){d.trigger("input").trigger("change").trigger("keydown")},500))}),b.$on("$destroy",function(){a.cancel(e)})}}}]),b.module("mwI18n",[]).provider("i18n",function(){var a=[],c=[],d={},e=!1,f=null,g=null,h=function(){return _.findWhere(c,{active:!0})},i=function(a){var b=h(),d=_.findWhere(c,{id:a});if(!d)throw new Error("You can not set a locale that has not been registered. Please register the locale first by calling addLocale()");b&&(b.active=!1),d.active=!0},j=function(a){var c=f||h();if(c&&d&&d[c.id]){var e=d[c.id];return b.forEach(a.split("."),function(a){e=e?e[a]:null}),e}return!1},k=function(a){var b;return _.each(c,function(c){!b&&a[c.id]&&(b=a[c.id])}),b||(b=_.values(a)[0]),b},l=function(a){for(var b,c=/{{([a-zA-Z0-9$_]+)}}/g,d=[];null!==(b=c.exec(a));)b.index===c.lastIndex&&c.lastIndex++,d.push(b[1]);return d},m=function(a,b){if(b){var c=l(a);c.forEach(function(c){a=a.replace("{{"+c+"}}",b[c])})}return a};this.addLocale=function(a,b,e){_.findWhere(c,{id:a})||(c.push({id:a,name:b,active:a===g,fileExtension:e||a+".json"}),d[a]={})},this.addResource=function(b){_.findWhere(a,{path:b})||a.push({path:b})},this.setDefaultLocale=function(a){g=a,_.findWhere(c,{id:a})&&i(a)},this.$get=["$templateRequest","$q","$rootScope",function(l,n,o){return{_loadResource:function(b){var c=_.findWhere(a,{path:b}),e=this.getActiveLocale(),f="";return c&&e?(f=e.fileExtension,l(c.path+"/"+f).then(function(a){return _.extend(d[e.id],JSON.parse(a)),a})):n.reject("Resource not available or no locale has been set")},getLocales:function(){return c},getActiveLocale:function(){return h()},get:function(a,b){var c=j(a);return c?m(c,b):e?"...":"MISSING TRANSLATION "+this.getActiveLocale().id+": "+a},setLocale:function(b){var c=[];return e=!0,f=this.getActiveLocale(),i(b),_.each(a,function(a){c.push(this._loadResource(a.path))},this),n.all(c).then(function(){return e=!1,f=null,o.$broadcast("i18n:localeChanged",b),b})},translationIsAvailable:function(a){return!!j(a)},localize:function(a){var c=this.getActiveLocale(),d=a[c.id];return b.isDefined(d)&&""!==d?d:a[g]||k(a)}}}]}).filter("i18n",["i18n",function(a){function b(b,c){return _.isString(b)?a.get(b,c):_.isObject(b)?a.localize(b):void 0}return b.$stateful=!0,b}]),b.module("mwListable",[]).directive("mwListable",["$compile","$window","$document",function(a,c,d){return{restrict:"A",scope:{selectable:"=",filterable:"="},compile:function(a){return a.append("<tfoot mw-listable-footer></tfoot>"),function(a,e){var f,g=b.element(c),h=b.element(d);e.addClass("table table-striped mw-listable");var i=function(){a.filterable&&g.scrollTop()>=.8*(h.height()-g.height())&&a.filterable.loadMore()},j=function(){a.filterable&&f[0].scrollHeight>0&&f[0].scrollHeight-f.scrollTop()-f[0].clientHeight<2&&a.filterable.loadMore()};e.parents(".modal").length?(f=e.parents(".modal-body"),f.on("scroll",j),a.$on("$destroy",function(){f.off("scroll",j)})):(g.on("scroll",i),a.$on("$destroy",function(){g.off("scroll",i)}))}},controller:["$scope",function(a){var b=a.columns=[];this.actionColumns=[],this.sort=function(b,c){a.filterable&&a.filterable.setSortOrder(c+b)},this.getSort=function(){return a.filterable?a.filterable.sortOrder():void 0},this.registerColumn=function(a){b.push(a)},this.getColumns=function(){return b},this.getFilterable=function(){return a.filterable},this.getSelectable=function(){return a.selectable},this.toggleAll=function(){a.selectable.allSelected()?a.selectable.unselectAll():a.selectable.selectAll()},this.isRadio=function(){return a.selectable?a.selectable.isRadio():!1}}]}}]).directive("mwListableHead",["$compile",function(a){return{require:"^mwListable",scope:{title:"@mwListableHead"},link:function(c,d,e,f){c.filterable=f.getFilterable(),c.selectable=f.getSelectable();var g='<tr><th colspan="20" class="listable-amount" ng-if="filterable.total()"><span ng-if="selectable.selected().length>0">{{selectable.selected().length}}/{{filterable.total()}} {{title}} {{ \'common.selected\' | i18n }}</span><span ng-if="!selectable || selectable.selected().length<1">{{filterable.total()}} {{title}}</span></th></tr>',h=b.element(g),i=a(h);d.prepend(h),i(c)}}}]).directive("mwListableFooter",["Loading",function(a){return{require:"^mwListable",templateUrl:"uikit/templates/mwListable/mwListableFooter.html",link:function(b,c,d,e){b.Loading=a,b.columns=e.getColumns()}}}]).directive("mwListableHeader",function(){return{restrict:"A",require:"^mwListable",scope:{property:"@sort",width:"@",sortActive:"="},transclude:!0,replace:!0,templateUrl:"uikit/templates/mwListable/mwListableHeader.html",link:function(a,b,c,d){var e="+",f="-";a.toggleSortOrder=function(){if(a.property){var b=e;d.getSort()===e+a.property&&(b=f),d.sort(a.property,b)}},a.isSelected=function(b){return b?d.getSort()===b+a.property:d.getSort()==="+"+a.property||d.getSort()==="-"+a.property},a.property&&b.find(".title").on("click",a.toggleSortOrder),d.registerColumn(a)}}}).directive("mwListableColumnCheckbox",function(){return{restrict:"A",require:"^mwListable",scope:{mwDisabled:"=",item:"="},templateUrl:"uikit/templates/mwListable/mwListableColumnCheckbox.html",link:function(a,b,c,d){a.selectable=d.getSelectable(),a.radio=d.isRadio(),a.click=function(b,c){c.stopPropagation(),a.selectable.toggle(b)}}}}).directive("mwListableHeaderCheckbox",function(){
return{restrict:"A",require:"^mwListable",scope:!0,templateUrl:"uikit/templates/mwListable/mwListableHeaderCheckbox.html",link:function(a,b,c,d){a.radio=d.isRadio(),a.filterable=d.getFilterable(),a.selectable=d.getSelectable(),a.toggleAll=d.toggleAll}}}).directive("mwListableBodyRow",function(){return{restrict:"A",require:"^mwListable",compile:function(a){return a.prepend('<td ng-if="selectable" mw-listable-column-checkbox mw-disabled="isDisabled()" item="item"></td>'),function(a,b,c){var d="selected";a.selectable&&b.addClass("selectable"),b.on("click",function(){a.selectable&&!a.isDisabled(a.item)&&(a.selectable.toggle(a.item),a.$apply())}),a.$watch("selectable.isSelected(item)",function(a){a?b.addClass(d):b.removeClass(d)}),a.isDisabled=function(){return a.$eval(c.mwListableDisabled,{item:a.item})}}}}}).directive("mwListableHeaderRow",function(){return{restrict:"A",require:"^mwListable",scope:!0,compile:function(a){return a.prepend('<th ng-if="selectable" mw-listable-header-checkbox width="1%"></th>'),a.append('<th ng-if="actionColumns.length > 0" colspan="{{ actionColumns.length }}" width="1%" class="action-button"></th>'),function(a,b,c,d){a.selectable=d.getSelectable(),a.actionColumns=d.actionColumns}}}}).directive("mwListableLinkEdit",function(){return{restrict:"A",require:"^mwListable",scope:{link:"@mwListableLinkEdit"},template:'<a ng-href="{{ link }}" class="btn btn-default btn-sm"><span mw-icon="rln-icon edit"></span></a>',link:function(a,b,c,d){d.actionColumns.push(null)}}}).directive("mwListableLinkShow",function(){return{restrict:"A",require:"^mwListable",scope:{link:"@mwListableLinkShow"},template:'<span mw-link-show="{{link}}"></span>',link:function(a,b,c,d){d.actionColumns.push(null)}}}).directive("mwRowIdentifier",function(){return{restrict:"A",link:function(a,b,c){c.mwRowIdentifier&&c.$set("title",c.mwRowIdentifier)}}}),b.module("mwListableBb",[]).directive("mwListableBb",function(){return{restrict:"A",scope:{collection:"=",mwListCollection:"="},compile:function(a){return a.append("<tfoot mw-listable-footer-bb></tfoot>"),function(a,b){b.addClass("table table-striped mw-listable")}},controller:["$scope",function(a){var b=a.columns=[],c=null,d=null;this.actionColumns=[],this.sort=function(a,b){var e=b+a;c.filterable.setSortOrder(e),c.fetch().then(function(){return d&&d.applySortOrder({property:a,order:b}),c})},this.getSortOrder=function(){return c.filterable.getSortOrder()},this.registerColumn=function(a){b.push(a)},this.unRegisterColumn=function(a){if(a&&a.$id){var c=_.findWhere(b,{$id:a.$id}),d=_.indexOf(b,c);d>-1&&b.splice(d,1)}},this.getColumns=function(){return b},this.getCollection=function(){return c},this.isSingleSelection=function(){return c&&c.selectable?c.selectable.isSingleSelection():!1},a.$on("$destroy",function(){this.actionColumns=[]}.bind(this)),a.mwListCollection?(c=a.mwListCollection.getCollection(),d=a.mwListCollection.getMwListCollectionFilter()):a.collection&&(console.warn("The scope attribute collection is deprecated please use the mwCollection instead"),c=a.collection)}]}}).directive("mwListableHeadBb",["$compile",function(a){return{require:"^mwListableBb",scope:{title:"@mwListableHeadBb",noCounter:"="},link:function(c,d,e,f){if(c.collection=f.getCollection(),b.isUndefined(c.noCounter)){var g='<tr><th colspan="20" class="listable-amount" ng-if="collection.filterable.getTotalAmount()"><span ng-if="collection.selectable.getSelected().length > 0">{{collection.selectable.getSelected().length}}/{{collection.filterable.getTotalAmount() || collection.length}} {{title}} {{ \'common.selected\' | i18n }}</span><span ng-if="!collection.selectable || collection.selectable.getSelected().length<1">{{collection.filterable.getTotalAmount() || collection.length}} {{title}}</span></th></tr>',h=b.element(g),i=a(h);d.prepend(h),i(c)}}}}]).directive("mwListableFooterBb",["Loading",function(a){return{require:"^mwListableBb",templateUrl:"uikit/templates/mwListableBb/mwListableFooter.html",link:function(b,c,d,e){b.Loading=a,b.collection=e.getCollection(),b.columns=e.getColumns()}}}]).directive("mwListableHeaderBb",function(){return{restrict:"A",require:"^mwListableBb",scope:{property:"@sort"},transclude:!0,replace:!0,templateUrl:"uikit/templates/mwListableBb/mwListableHeader.html",link:function(a,b,c,d){var e="+",f="-";a.toggleSortOrder=function(){if(a.property){var b=e;d.getSortOrder()===e+a.property&&(b=f),d.sort(a.property,b)}},a.isSelected=function(b){return b?d.getSortOrder()===b+a.property:d.getSortOrder()==="+"+a.property||d.getSortOrder()==="-"+a.property},a.property&&b.find(".title").on("click",a.toggleSortOrder),d.registerColumn(a),a.$on("$destroy",function(){d.unRegisterColumn(a)})}}}).directive("mwListableColumnCheckboxBb",function(){return{restrict:"A",require:"^mwListableBb",scope:{item:"="},templateUrl:"uikit/templates/mwListableBb/mwListableColumnCheckbox.html",link:function(a,b,c,d){a.isSingleSelection=d.isSingleSelection(),a.click=function(a,b){b.stopPropagation(),a.selectable&&a.selectable.toggleSelect()},a.$watch("item.selectable.isDisabled()",function(b){b&&a.item.selectable.unSelect()})}}}).directive("mwListableHeaderCheckboxBb",function(){return{restrict:"A",require:"^mwListableBb",scope:!0,templateUrl:"uikit/templates/mwListableBb/mwListableHeaderCheckbox.html",link:function(a,b,c,d){a.isSingleSelection=d.isSingleSelection(),a.collection=d.getCollection()}}}).directive("mwListableBodyRowBb",["$timeout",function(a){return{restrict:"A",require:"^mwListableBb",compile:function(c){return c.prepend('<td  ng-if="collection.selectable && item.selectable" mw-listable-column-checkbox-bb item="item"></td>'),function(c,d,e,f){var g="selected";if(c.collection=f.getCollection(),!c.item)throw new Error('No item available in the list! Please make sure to use ng-repeat="item in collection"');c.item&&c.item.selectable&&!c.item.selectable.isDisabled()?d.addClass("selectable clickable"):f.actionColumns&&f.actionColumns.length>0&&d.addClass("clickable"),d.on("click",function(){c.item&&c.item.selectable&&!c.item.selectable.isDisabled()&&a(function(){c.item.selectable.toggleSelect()})}),d.on("dblclick",function(){f.actionColumns&&b.isNumber(c.$index)&&f.actionColumns[c.$index]&&(document.location.href=f.actionColumns[c.$index])}),c.$watch("item.selectable.isSelected()",function(a){a?d.addClass(g):d.removeClass(g)})}}}}]).directive("mwListableHeaderRowBb",function(){return{restrict:"A",require:"^mwListableBb",scope:!0,compile:function(a){return a.prepend('<th ng-if="hasCollection" width="1%"></th>'),a.append('<th ng-if="actionColumns.length > 0" colspan="{{ actionColumns.length }}" width="1%" class="action-button"></th>'),function(a,c,d,e){a.hasCollection=!1;var f=e.getCollection();f&&(a.hasCollection=b.isDefined(f.length)&&f.selectable),a.actionColumns=e.actionColumns}}}}).directive("mwListableLinkShowBb",function(){return{restrict:"A",require:"^mwListableBb",scope:{link:"@mwListableLinkShowBb"},template:'<span mw-link-show="{{link}}"></span>',link:function(a,b,c,d){d.actionColumns.push(a.link)}}}).directive("mwRowIdentifierBb",function(){return{restrict:"A",link:function(a,b,c){c.mwRowIdentifier&&c.$set("title",c.mwRowIdentifier)}}}).directive("mwListableHead2",["$window","$document","i18n","MCAPCollection",function(a,c,d,e){return{scope:{collection:"=",affix:"=",affixOffset:"=",collectionName:"@",nameFn:"&",nameAttribute:"@",localizeName:"@",nameI18nPrefix:"@",nameI18nSuffix:"@",searchAttribute:"@"},transclude:!0,templateUrl:"uikit/templates/mwListableBb/mwListableHead.html",link:function(c,f,g,h,i){var j,k=b.element("body"),l=f.parents(".modal .modal-body"),m=!1,n=b.isDefined(c.affix)?c.affix:!0,o=b.element(a);c.selectable=!1,c.selectedAmount=0,c.collectionName=c.collectionName||d.get("common.items"),c.isModal=l.length>0,c.isLoadingModelsNotInCollection=!1,c.hasFetchedModelsNotInCollection=!1,c.isLoadingModelsNotInCollection=!1,c.hasFetchedModelsNotInCollection=!1;var p,q=_.throttle(function(){if(!p){var a,d,e,g,h;c.isModal?(a=b.element(".modal-header").offset().top,d=b.element(".modal-header").innerHeight(),h=-3):(a=b.element("[mw-header]").offset().top,d=b.element("[mw-header]").innerHeight(),h=5),e=a+d,g=f.offset().top,p=g-e-h,console.log(p)}var i=j.scrollTop();i>p&&n?(f.find(".mw-listable-header").css("top",i-p),f.addClass("affixed")):n?(f.find(".mw-listable-header").css("top","initial"),f.removeClass("affixed")):j.off("scroll",q)},10),r=_.throttle(function(){f.find(".mw-listable-header").css("top","initial"),p=null}),s=function(){if(!c.hasFetchedModelsNotInCollection){var a=[];if(c.selectable.getSelected().each(function(b){b.selectable.isInCollection||c.getModelAttribute(b)||a.push(b)}),0!==a.length){var b=c.collection.constructor.extend({filterableOptions:function(){return{filterDefinition:function(){var b=new window.mCAP.Filter,c=[];return a.forEach(function(a){a.id&&c.push(b.string(a.idAttribute,a.id))}),b.or(c)}}}}),d=new b;d.url=c.collection.url(),c.isLoadingModelsNotInCollection=!0,d.fetch().then(function(b){c.hasFetchedModelsNotInCollection=!0;var d=c.selectable.getSelected();b.each(function(a){d.get(a.id).set(a.toJSON())});var e=_.difference(_.pluck(a,"id"),b.pluck("uuid"));e.forEach(function(a){d.get(a).selectable.isDeletedItem=!0}),c.isLoadingModelsNotInCollection=!1})}}};c.showSelected=function(){m=!0,s(),setTimeout(function(){var d;c.isModal?(d=l.height()+(l.offset().top-f.find(".selected-items").offset().top)+25,l.css("overflow","hidden")):(d=b.element(a).height()-f.find(".selected-items").offset().top+j.scrollTop()-25,k.css("overflow","hidden")),f.find(".selected-items").css("height",d),f.find(".selected-items").css("bottom",-1*d)})},c.hideSelected=function(){c.isModal?l.css("overflow","auto"):k.css("overflow","inherit"),m=!1},c.canShowSelected=function(){return c.selectable&&m&&c.selectedAmount>0},c.unSelect=function(a){a.selectable.unSelect()},c.toggleSelectAll=function(){c.selectable.toggleSelectAll()},c.getTotalAmount=function(){return c.collection.filterable&&c.collection.filterable.getTotalAmount()?c.collection.filterable.getTotalAmount():c.collection.length},c.toggleShowSelected=function(){m?c.hideSelected():c.showSelected()},c.getModelAttribute=function(a){if(c.nameAttribute){var e=a.get(c.nameAttribute);if(c.nameI18nPrefix||c.nameI18nSuffix){var f=c.nameI18nPrefix||"",g=c.nameI18nSuffix||"";return d.get(f+"."+e+"."+g)}return b.isDefined(c.localizeName)?d.localize(e):e}return c.nameFn({item:a})};var t=function(){c.selectable=c.collection.selectable,j=c.isModal?l:o,j.on("scroll",q),j.on("resize",r),c.$on("$destroy",function(){j.off("scroll",q)}),c.$on("$destroy",function(){j.off("resize",r)}),f.on("focus","input[type=text]",function(){f.find(".search-bar").addClass("focused")}),f.on("blur","input[type=text]",function(){f.find(".search-bar").removeClass("focused")})};i(function(a){a&&a.length>0&&f.addClass("has-extra-content")}),c.$watch(function(){return c.selectable?c.selectable.getSelected().length:0},function(a){c.selectedAmount=a,1>a&&c.hideSelected()}),c.$watch("collection",function(a){a&&a instanceof e&&t()})}}}]),b.module("mwCollection",[]).service("MwListCollection",["$q","MCAPFilterHolders","MCAPFilterHolder","MwListCollectionFilter",function(a,b,c,d){var e=function(b,c){var e=b,f=(c||b.endpoint)+"_V1",g=new d(f);this.getMwListCollectionFilter=function(){return g},this.getCollection=function(){return e},this.fetch=function(){var b=this.getMwListCollectionFilter();return a.all([b.fetchAppliedFilter(),b.fetchAppliedSortOrder()]).then(function(c){var d=c[0],f=c[1],g=d.get("filterValues");return f.property&&e.filterable.setSortOrder(f.order+f.property),d.get("group")?e.filterable.setFilters(g):e.filterable.filterIsSet=!1,a.all([e.fetch(),b.fetchFilters()]).then(function(){return this}.bind(this))}.bind(this))}};return e}]),b.module("mwCollection").service("MwListCollectionFilter",["$q","$timeout","LocalForage","MCAPFilterHolders","MCAPFilterHolder",function(a,b,c,d,e){var f=function(b){var f=b,g="applied_filter_"+f,h="applied_sort_order_"+f,i=new d(null,b),j=new e,k={order:null,property:null};this.getFilters=function(){return i},this.fetchFilters=function(){return i.length>0?a.when(i):i.fetch()},this.saveFilter=function(a){return i.add(a,{merge:!0}),a.save().then(function(a){return i.add(a,{merge:!0}),a})},this.deleteFilter=function(a){var b=a.id;return a.destroy().then(function(){b===j.id&&this.revokeFilter()}.bind(this))},this.getAppliedFilter=function(){return j},this.fetchAppliedFilter=function(){return j.get("uuid")?a.when(j):c.getItem(g).then(function(a){return j.set(a),j})},this.applyFilter=function(a){var b=a.toJSON();return j.set(b),c.setItem(g,b)},this.revokeFilter=function(){return j.clear(),c.removeItem(g)},this.getAppliedSortOrder=function(){return k},this.fetchAppliedSortOrder=function(){return k.order&&k.property?a.when(k):c.getItem(h).then(function(a){return k=a||{order:null,property:null}})},this.applySortOrder=function(a){return j.set(a),c.setItem(h,a)},this.revokeSortOrder=function(){return c.removeItem(h)}};return f}]),b.module("mwMap",[]).directive("mwMap",function(){return{restrict:"A",scope:{centerLat:"=",centerLng:"=",zoom:"=",type:"@"},transclude:!0,templateUrl:"uikit/templates/mwMap/mwMap.html",controller:["$window","$scope","LayoutWatcher",function(a,b,c){if(!a.ol)throw new Error("The directive mwMap needs the Openlayer 3 library. Make sure you included it!");var d=this.openlayer=a.ol,e=[b.lng||9.178977,b.lat||48.812951],f=b.zoom||1,g=b.type||"osm",h=function(){b.centerLat&&b.centerLng&&b.map.getView().setCenter(d.proj.transform([b.centerLng,b.centerLat],"EPSG:4326","EPSG:3857"))},i=function(){b.map.updateSize()};b.map=this.map=new d.Map({layers:[new d.layer.Tile({source:new d.source.MapQuest({layer:g,minZoom:6})})],ol3Logo:!1,view:new d.View({center:d.proj.transform(e,"EPSG:4326","EPSG:3857"),zoom:f,minZoom:6})}),b.$watch("zoom",function(a){a&&b.map.getView().setZoom(a)}),b.$watch("centerLat",h),b.$watch("centerLng",h),c.registerCallback(i),b.$on("$destroy",function(){b.map.removeLayer(),b.map.removeOverlay()})}],link:function(a,b){a.map.setTarget(b.find("#map")[0])}}}).directive("mwMapMarker",function(){return{restrict:"A",scope:{lat:"=",lng:"="},require:"^mwMap",template:'<div class="marker"></div>',link:function(a,b,c,d){var e=d.map,f=d.openlayer,g=[a.lng||0,a.lat||0],h=new f.Overlay({position:f.proj.transform(g,"EPSG:4326","EPSG:3857"),positioning:"center-center",element:b[0],stopEvent:!1}),i=function(){a.lat&&a.lng&&h.setPosition(f.proj.transform([a.lng,a.lat],"EPSG:4326","EPSG:3857"))};e.addOverlay(h),a.$watch("lat",i),a.$watch("lng",i),a.$on("$destroy",function(){e.removeOverlay(h)})}}}).directive("mwMapOverlay",function(){return{restrict:"A",scope:{lat:"=",lng:"=",display:"="},transclude:!0,require:"^mwMap",template:'<div ng-transclude class="overlay mw-map-overlay"></div>',link:function(a,b,c,d){var e=d.map,f=d.openlayer,g=[a.lng||0,a.lat||0],h=new f.Overlay({position:f.proj.transform(g,"EPSG:4326","EPSG:3857"),positioning:"center-center",element:b.find(".mw-map-overlay")[0],stopEvent:!1}),i=function(){a.lat&&a.lng&&h.setPosition(f.proj.transform([a.lng,a.lat],"EPSG:4326","EPSG:3857"))};e.addOverlay(h),a.$watch("lat",i),a.$watch("lng",i),a.$watch("display",function(a){a?(e.addOverlay(h),i()):e.removeOverlay(h)}),a.$on("$destroy",function(){e.removeOverlay(h)})}}}).directive("mwMapCircle",function(){return{restrict:"A",scope:{lat:"=",lng:"=",radius:"=",fill:"@",stroke:"@",strokeWidth:"@"},require:"^mwMap",link:function(a,b,c,d){var e=d.map,f=d.openlayer,g=[a.lng||0,a.lat||0],h=a.radius||1e3,i=a.fill||"rgba(255, 255, 255, .5)",j=a.stroke||"#fff",k=a.strokeWidth||3;e.on("postcompose",function(a){a.vectorContext.setFillStrokeStyle(new f.style.Fill({color:i}),new f.style.Stroke({color:j,width:k})),a.vectorContext.drawCircleGeometry(new f.geom.Circle(f.proj.transform(g,"EPSG:4326","EPSG:3857"),h))})}}}),b.module("mwModal",[]).service("Modal",["$rootScope","$templateCache","$document","$compile","$controller","$q","$templateRequest","$timeout","Toast",function(a,c,d,e,f,h,i,j,k){var l=d.find("body").eq(0),m=[],n=function(c,d){var n,o,p,q,r=c.templateUrl,s=c.scope||a,t=c.scopeAttributes||{},u=c.controller,v=c["class"]||"",w=c.el?c.el:"body .module-page",x=d||{},y=!1,z=this,A=function(){if(!r)throw new Error("Modal service: templateUrl options is required.");return i(r)},B=function(){p.on("hidden.bs.modal",function(){z.destroy()})},C=function(){var b=a.$on("$locationChangeStart",function(a,c){p&&y?(a.preventDefault(),z.hide().then(function(){document.location.href=c,b()})):b()})},D=function(){var a=h.defer();return o=s.$new(),_.extend(o,t),u&&f(u,{$scope:o,modalId:r}),s.hideModal=function(){return z.hide()},A().then(function(b){n=e(b.trim())(o),o.$on("COMPILE:FINISHED",function(){n.addClass("mw-modal"),n.addClass(v),p=n.find(".modal"),x.show=!1,p.modal(x),p.data()["bs.modal"].backdrop=function(a){g.call(p.data()["bs.modal"],a,$(w).find(".modal"))},B(),C(),a.resolve()})}),a.promise};this.id=r,this.getScope=function(){return s},this.show=function(){l.css({height:"100%",width:"100%",overflow:"hidden"}),k.clear(),q=b.element(document.activeElement),D().then(function(){b.element(w).append(n),p.modal("show"),y=!0,m.push(this),p.on("shown.bs.modal",function(){b.element(this).find("input:text:visible:first").focus()}),q&&p.on("hidden.bs.modal",function(){q.focus()})}.bind(this))},this.setScopeAttributes=function(a){_.isObject(a)&&_.extend(t,a)},this.hide=function(){var a=h.defer();return p&&y?(p.one("hidden.bs.modal",function(){p.off(),z.destroy(),y=!1,a.resolve()}),p.modal("hide")):a.resolve(),a.promise},this.toggle=function(){p.modal("toggle")},this.destroy=function(){m=_.without(m,this);var a=k.getToasts();a.forEach(function(a){+new Date-a.initDate>500&&k.removeToast(a.id)}),j(function(){l.css({height:"",width:"",overflow:""}),n&&(n.remove(),y=!1),o&&o.$destroy()}.bind(this))},function(){A(),s.$on("$destroy",function(){z.hide()})}()};this.create=function(a){return new n(a)},this.prepare=function(a,b){var c=function(){return new n(a,b)};return c},this.getOpenedModals=function(){return m}}]).provider("mwModalTmpl",function(){var a;this.setLogoPath=function(b){a=b},this.$get=function(){return{getLogoPath:function(){return a}}}}).directive("mwModal",["mwModalTmpl",function(a){return{restrict:"A",scope:{title:"@"},transclude:!0,templateUrl:"uikit/templates/mwModal/mwModal.html",link:function(b){b.$emit("COMPILE:FINISHED"),b.mwModalTmpl=a}}}]).directive("mwModalBody",function(){return{restrict:"A",transclude:!0,replace:!0,template:'<div class="modal-body clearfix" ng-transclude></div>'}}).directive("mwModalFooter",function(){return{restrict:"A",transclude:!0,replace:!0,template:'<div class="modal-footer" ng-transclude></div>'}}).directive("mwModalOnEnter",function(){return{restrict:"A",require:"?^form",link:function(a,b,c,d){b.parents(".modal").first().on("keyup",function(a){13===a.keyCode&&"SELECT"!==a.target.nodeName&&(d&&d.$valid||!d)&&b.click()})}}}).directive("mwModalConfirm",function(){return{restrict:"A",transclude:!0,scope:!0,templateUrl:"uikit/templates/mwModal/mwModalConfirm.html",link:function(a,c,d){b.forEach(["ok","cancel"],function(b){a[b]=function(){a.$eval(d[b])}})}}});var g=function(a,b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=$.support.transition&&c;if(this.$backdrop=$('<div class="modal-backdrop '+c+'" />').appendTo(b),this.$backdrop.on("click",$.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!a)return;d?this.$backdrop.one($.support.transition.end,a).emulateTransitionEnd(150):a()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,a).emulateTransitionEnd(150):a()):a&&a()};b.module("mwNav",[]).directive("mwSubNav",function(){return{restrict:"A",scope:{justified:"="},replace:!0,transclude:!0,template:'<div class="mw-nav"><ul class="nav nav-pills" ng-class="{\'nav-justified\':justified}" ng-transclude></ul></div>'}}).directive("mwSubNavPill",["$location",function(a){return{restrict:"A",scope:{url:"@mwSubNavPill",mwDisabled:"="},transclude:!0,replace:!0,template:'<li ng-class="{mwDisabled: mwDisabled}"><div class="btn btn-link" ng-click="navigate(url)" ng-class="{disabled: mwDisabled}" ng-transclude></div></li>',link:function(b,c){var d=function(a){b.url&&a===b.url.slice(1)?c.addClass("active"):c.removeClass("active")};b.$watch("url",function(b){b&&d(a.$$path)}),b.navigate=function(c){b.mwDisabled||(c=c.replace(/#\//,""),a.path(c),a.replace())},d(a.$$path)}}}]).directive("mwNavbar",["$location",function(a){return{transclude:!0,replace:!0,templateUrl:"uikit/templates/mwNav/mwNavbar.html",controller:function(){this.isActive=function(b,c){if(!b)return!1;var d=b.substring(1);return c?a.path()===d:a.path().indexOf(d)>-1}}}}]).directive("mwNavbarContent",function(){return{transclude:!0,replace:!0,template:'<div class="navbar-collapse collapse" ng-transclude></div>',link:function(a,b){a.uncollapse=function(){b.hasClass("in")&&b.collapse("hide")}}}}).directive("mwNavbarBrand",function(){return{transclude:!0,replace:!0,templateUrl:"uikit/templates/mwNav/mwNavbarBrand.html"}}).directive("mwNavbarItems",function(){return{transclude:!0,replace:!0,template:'<ul class="nav navbar-nav" ng-transclude></ul>',link:function(a,b,c){c.mwNavbarItems&&b.addClass("navbar-"+c.mwNavbarItems),b.on("click",function(){b.hasClass("in")&&b.collapse("hide")})}}}).directive("mwNavbarItem",["$rootScope",function(a){return{transclude:!0,replace:!0,scope:!0,require:"^mwNavbar",template:'<li ng-class="{active: isActive}" ng-transclude></li>',link:function(b,c,d,e){var f=function(){b.isActive=e.isActive(c.find("a").attr("href"))};f(),a.$on("$routeChangeSuccess",f),c.find("a").on("click",function(){b.uncollapse()})}}}]).directive("mwNavbarDropdown",["$rootScope",function(a){return{replace:!0,require:"^mwNavbar",transclude:!0,template:'<li ng-class="{active: isActive}" class="dropdown" ng-transclude></li>',link:function(c,d,e,f){var g=function(){var a=!1;b.forEach(c.dropdownItems,function(b){a||(a=f.isActive(b))}),c.isActive=a};g(),a.$on("$routeChangeSuccess",g)},controller:["$scope",function(a){var b=a.dropdownItems=[];this.register=function(a){b.push(a)}}]}}]).directive("mwNavbarDropdownTitle",function(){return{replace:!0,transclude:!0,template:'<a class="dropdown-toggle" data-toggle="dropdown"><span ng-transclude></span> <b class="caret"></b></a>'}}).directive("mwNavbarDropdownItems",function(){return{transclude:!0,replace:!0,template:'<ul class="dropdown-menu" ng-transclude></ul>'}}).directive("mwNavbarDropdownItem",["$rootScope",function(a){return{transclude:!0,replace:!0,scope:!0,require:["^mwNavbarDropdown","^mwNavbar"],template:'<li ng-class="{active: isActive}" ng-transclude></li>',link:function(b,c,d,e){var f=c.find("a").attr("href"),g=e[0],h=e[1];g&&g.register(f);var i=function(){b.isActive=h?h.isActive(f,!0):!1};i(),a.$on("$routeChangeSuccess",i),c.find("a").on("click",function(){b.uncollapse()})}}}]),b.module("mwPopover",[]).service("Popover",function(){this.contents=[]}).directive("mwPopoverContent",["$compile","Popover",function(a,b){return{restrict:"A",link:function(c,d,e){d.css("display","none"),b.contents[e.mwPopoverContent]=a(d.html())(c)}}}]).directive("mwPopover",["$rootScope","$templateRequest","$compile",function(a,b,c){return{restrict:"A",link:function(a,d,e){var f=!1,g="",h=function(){d.popover("destroy"),d.popover({trigger:e.popoverTrigger||"hover",title:e.popoverTitle,html:!0,placement:e.popoverPosition,content:c(g.trim())(a)}),d.on("show.bs.popover",function(){f=!0})};d.on("blur",function(){d.popover("hide")}),e.popoverTitle=e.popoverTitle||"popoverTitle",e.$observe("popoverTitle",h),e.popoverUrl&&(g="<span rln-spinner></span>",b(e.popoverUrl).then(function(a){g=a,h()}),h()),e.$observe("content",function(a){a&&(g=a,h())}),a.$on("$destroy",function(){var a=d.data("bs.popover");a&&a.tip()&&a.tip().detach().remove()})}}}]),b.module("mwResponseHandler",[]).provider("ResponseHandler",function(){var a={POST:[],PUT:[],GET:[],DELETE:[],PATCH:[]},c=function(a){return new Error("Method "+a+" is invalid. Valid methods are POST, PUT, GET, DELETE, PATCH")},d=function(a){var b={ERROR:[],SUCCESS:[]},c=a,d=null,e=/\((.*?)\)/g,f=/(\(\?)?:\w+/g,g=/\*\w?/g,h=/[\-{}\[\]+?.,\\\^$|#\s]/g,i=function(a){return a=a.replace(h,"\\$&").replace(e,"(?:$1)?").replace(f,function(a,b){return b?a:"([^/?]+)"}).replace(g,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},j=function(a,c){var d=b[a],e=d||[];e.push(c),b[a]=e},k=function(a){return b[a]};this.matchesUrl=function(a){return a.match(d)},this.registerCallbackForStatusCodes=function(a,b){a.forEach(function(a){j(a,b)},this)},this.registerCallbackForSuccess=function(a){j("SUCCESS",a)},this.registerCallbackForError=function(a){j("ERROR",a)},this.getCallbacksForStatusCode=function(a){return k(a)},this.getCallbacksForSuccess=function(){return k("SUCCESS")},this.getCallbacksForError=function(){return k("ERROR")};var l=function(){d=i(c)};l.call(this)};this.registerAction=function(b,e,f){if(f=f||{},!f.onError&&!f.onSuccess&&!f.statusCodes)throw new Error("You have to specify either some statusCodes or set onSuccess or onError to true in the options parameter object");if(f.onError&&f.onSuccess||(f.onError||f.onSuccess)&&f.statusCodes)throw new Error("Definition is too imprecise");if(!f.method&&!f.methods)throw new Error('Method has to be defined in options e.g method: "POST" or methods:["POST"]');f.methods=f.methods||[f.method],f.methods.forEach(function(g){if(!a[g])throw c(g);var h=_.findWhere(a[g],{id:b}),i=h||{id:b,handler:new d(b)},j=i.handler;f.statusCodes?j.registerCallbackForStatusCodes(f.statusCodes,e):f.onSuccess?j.registerCallbackForSuccess(e):f.onError&&j.registerCallbackForError(e),h||a[g].push(i)})},this.registerSuccessAction=function(a,b,c){return this.registerAction(a,b,{method:c,onSuccess:!0})},this.registerErrorAction=function(a,b,c){return this.registerAction(a,b,{method:c,onError:!0})},this.registerDefaultAction=function(a,b){return b=b||{},this.registerAction("*",a,b)},this.registerDefaultSuccessAction=function(a,b){return this.registerAction("*",a,{method:b,onSuccess:!0})},this.registerDefaultErrorAction=function(a,b){return this.registerAction("*",a,{method:b,onError:!0})},this.$get=["$injector","$q",function(d,e){var f=function(a,b,c,d){var g=a.shift();if(d||(d=e.defer()),g){var h,i=g(b,c);h=i&&i.then?i:c?e.reject(i||b):e.when(i||b),h.then(function(b){f(a,b,!1,d)},function(b){f(a,b,!0,d)})}else c?d.reject(b):d.resolve(b);return d.promise},g=function(a,c,e){var g=[];return a.forEach(function(a){a=b.isString(a)?d.get(a):a,g.push(a)},this),f(g,c,e)},h=function(a,b,c){var d=a.getCallbacksForStatusCode(b),e=a.getCallbacksForSuccess(),f=a.getCallbacksForError();return d?d:c?f:e};return{getHandlerForUrlAndCode:function(b,d,e,f){var g;if(!a[b])throw c(b);return a[b].forEach(function(a){var b=a.handler,c=h(b,e,f);!g&&b.matchesUrl(d)&&c&&c.length>0&&(g=b)}),g},handle:function(a,b){var c=a.config.url,d=a.config.method,e=a.status,f=this.getHandlerForUrlAndCode(d,c,e,b);if(f){var i=h(f,e,b);if(i)return g(i,a,b)}}}}]}).config(["$provide","$httpProvider",function(a,b){a.factory("requestInterceptorForHandling",["$q","ResponseHandler",function(a,b){var c=function(c,d){var e=b.handle(c,d);return e?e:d?a.reject(c):a.when(c)};return{response:function(a){return c(a,!1)},responseError:function(a){return c(a,!0)}}}]),b.interceptors.push("requestInterceptorForHandling")}]),b.module("mwResponseToastHandler",["mwResponseHandler","mwI18n","mwToast"]).provider("ResponseToastHandler",["$provide","ResponseHandlerProvider",function(a,b){var c=[],d={DEFAULT:{type:"default",autoHide:!1}},e=function(b,c,e){e=e||{};var f=_.uniqueId("notification_factory");return a.factory(f,["Toast","i18n",function(a,f){return function(g){if(b){var h,i=a.findToast(c),j={},k=i?b.plural:b.singular,l={id:c};if(i&&b.plural?k=b.plural:b.singular&&(k=b.singular),j.$count=i?i.replaceCount+1:0,j.$count++,e.preProcess&&"function"==typeof e.preProcess){if(_.extend(j,g.data),h=e.preProcess.call(this,k,j,f,g),!h)return}else{var m=g.data||{};if(m.results&&!_.isObject(m.results)?j={message:m.results}:m.results&&m.results.length>0&&_.extend(j,m.results[0]),g.config.instance&&"function"==typeof g.config.instance.toJSON){var n=g.config.instance.toJSON();_.extend(n,j),j=n}h=f.get(k,j)}if(e.toastType){var o=d[e.toastType];if(!o)throw new Error("Type "+e.toastType+" is not available. Make sure you have configured it first");_.extend(l,o)}else _.extend(l,d.DEFAULT);a.addToast(h,l)}}}]),f};this.registerToastType=function(a,b){if(d[a])throw new Error("The toast type "+a+" is already defined. You can configure a toast type only once");d[a]=b},this.registerToast=function(a,d,f){f=f||{};var g=f.statusCodes||[f.onSuccess?"SUCCESS":"ERROR"];if(_.isUndefined(d)||_.isObject(d)&&!d.singular)throw new Error('You have to pass a messages object and define at least the singular message {singular:"Mandatory", plural:"Optional"}');g.forEach(function(g){var h=f.id||a+"_"+f.method+"_"+g,i=e(d,h,f);if(c.indexOf(h)>-1)throw new Error("You can not define a second message for the route "+a+" and method "+f.method+" because you have already registered one!");"SUCCESS"===g||"ERROR"===g?delete f.statusCodes:f.statusCodes=[g],b.registerAction(a,i,f),c.push(h)})},this.registerSuccessToast=function(a,b,c,d,e){this.registerToast(a,b,{method:c,toastType:d,onSuccess:!0,preProcess:e})},this.registerErrorToast=function(a,b,c,d,e){this.registerToast(a,b,{method:c,toastType:d,onError:!0,preProcess:e})},this.registerDefaultSuccessToast=function(a,b,c,d){return this.registerToast("*",a,{method:b,toastType:c,onSuccess:!0,preProcess:d})},this.registerDefaultErrorToast=function(a,b,c,d){return this.registerToast("*",a,{method:b,toastType:c,onError:!0,preProcess:d})},this.$get=function(){}}]),b.module("mwSidebar",[]).directive("mwSidebarSelect",function(){return{transclude:!0,scope:{filterable:"=",mwDisabled:"=",property:"@",persist:"="},templateUrl:"uikit/templates/mwSidebar/mwSidebarSelect.html",link:function(a){a.$watch("filterable",function(){a.filterable&&(a.model=a.filterable.properties[a.property],a.persist&&(a.filterable.properties[a.property].persist=a.persist))})}}}).directive("mwSidebarPanel",["$document","$window",function(a,c){return{replace:!0,transclude:!0,templateUrl:"uikit/templates/mwSidebar/mwSidebarPanel.html",link:function(d,e){var f,g,h=b.element(c),i=function(){var c=b.element(e).offset().top,d=b.element("*[mw-header]").offset().top+b.element("*[mw-header]").height(),g=15,i=c-d-g,j=a.scrollTop();10>=i?h.off("scroll",f):j>i?b.element(e).find(".content-container").css("top",d+g):j>1?b.element(e).find(".content-container").css("top",c-j):b.element(e).find(".content-container").css("top","initial")},j=function(){var a=e.find(".content-container"),c=h.height(),d=e.offset().top,f=b.element("body > footer").height(),g=20,i=c-d-f-g;i>0?a.css("max-height",i):a.css("max-height","initial")};f=_.throttle(i,10),g=_.throttle(j,500),window.requestAnimFrame(j),setTimeout(j,500),h.on("resize",g),h.on("scroll",f),d.$on("$destroy",function(){h.off("resize",g),h.off("scroll",f)})}}}]).directive("mwSidebarActions",function(){return{transclude:!0,template:"<div ng-transclude></div><hr>"}}).directive("mwSidebarFilters",function(){return{transclude:!0,templateUrl:"uikit/templates/mwSidebar/mwSidebarFilters.html",link:function(a){a.resetFiltersOnClose=function(){a.toggleFilters||(a.filterable.resetFilters(),a.filterable.applyFilters())},a.filterable&&a.filterable.hasPersistedFilters()&&(a.toggleFilters=!0)}}}),b.module("mwSidebarBb",[]).directive("mwSidebarFiltersBb",["$timeout","MCAPFilterHolder",function(a,b){return{transclude:!0,templateUrl:"uikit/templates/mwSidebarBb/mwSidebarFilters.html",
controller:["$scope",function(a){this.getCollection=function(){return a.collection},this.getFilterHolders=function(){return a.filterHolders},this.changeFilter=function(b,c,d){if(d)a.collection.filterable.customUrlParams[b]=c,a.viewModel.tmpFilter.get("customUrlParams")[b]=c;else{var e={};e[b]=c,a.collection.filterable.setFilters(e),a.viewModel.tmpFilter.set({filter:a.collection.filterable.getFilters()}),a.viewModel.tmpFilter.get("filterValues")[b]=c}a.collection.fetch()}}],link:function(c,d,e){if(c.mwListCollection=c.$eval(e.mwListCollection),c.collection=c.$eval(e.collection),c.mwListCollection){var f=400;c.collection=c.mwListCollection.getCollection(),c.mwListCollectionFilter=c.mwListCollection.getMwListCollectionFilter(),c.filters=c.mwListCollectionFilter.getFilters(),c.appliedFilter=c.mwListCollectionFilter.getAppliedFilter(),c.viewModel={tmpFilter:new b,showFilterForm:!1,canShowForm:!1};var g=function(a){var b=c.filters.get(a),d=c.collection.filterable.getTotalAmount();a.set("totalAmount",d),b&&b.set("totalAmount",d)},h=function(a){return c.collection.filterable.resetFilters(),c.collection.filterable.setFilters(a.get("filterValues")),c.collection.fetch().then(function(){g(a)})};c.saveFilter=function(){var a;a=c.viewModel.tmpFilter.isNew()?new b(c.viewModel.tmpFilter.toJSON()):c.viewModel.tmpFilter,c.mwListCollectionFilter.saveFilter(a).then(function(a){c.viewModel.showFilterForm=!1,c.applyFilter(a)})},c.deleteFilter=function(a){var b=a.id,d=c.appliedFilter.id;return c.mwListCollectionFilter.deleteFilter(a).then(function(){b===d&&c.revokeFilter()})},c.applyFilter=function(a){h(a).then(function(){c.mwListCollectionFilter.applyFilter(a)})},c.revokeFilter=function(){c.mwListCollectionFilter.revokeFilter().then(function(){c.collection.filterable.resetFilters(),c.collection.fetch(),c.appliedFilter.clear()})},c.addFilter=function(){var d=new b;c.viewModel.canShowForm=!0,c.viewModel.tmpFilter.clear(),c.viewModel.tmpFilter.set(d.toJSON()),c.viewModel.showFilterForm=!0,a(function(){h(c.viewModel.tmpFilter)},f)},c.editFilter=function(b){c.viewModel.canShowForm=!0,c.viewModel.tmpFilter.clear(),c.viewModel.tmpFilter.set(b.toJSON()),c.viewModel.showFilterForm=!0,a(function(){h(b)},f)},c.cancelFilterEdit=function(){c.viewModel.showFilterForm=!1,c.appliedFilter.id&&c.appliedFilter.id===c.viewModel.tmpFilter.id||a(function(){c.applyFilter(c.appliedFilter)},f)},c.filtersAreApplied=function(){return _.size(c.viewModel.tmpFilter.get("filterValues"))>0},c.mwListCollectionFilter.fetchFilters(),c.mwListCollectionFilter.fetchAppliedFilter().then(function(a){g(a)})}else{if(!c.collection)throw new Error("please pass a collection or mwCollection as scope attribute");console.warn("The scope attribute collection is deprecated please use the mwCollection instead"),c.viewModel={showFilterForm:!0,canShowForm:!0,tmpFilter:new b}}}}}]).directive("mwSidebarSelectBb",["i18n",function(a){return{require:"^mwSidebarFiltersBb",scope:{property:"@",options:"=",placeholder:"@",mwDisabled:"=",keyProperty:"@",labelProperty:"@",labelTransformFn:"=",translationPrefix:"@",translationSuffix:"@",customUrlParameter:"@"},templateUrl:"uikit/templates/mwSidebarBb/mwSidebarSelect.html",link:function(c,d,e,f){c.viewModel={},c.key=function(a){return b.isDefined(c.keyProperty)?a.attributes[c.keyProperty]:a.attributes.key},c.collection=f.getCollection(),c.label=function(b){var d=c.key(b);return c.translationPrefix&&c.translationSuffix?d=a.get(c.translationPrefix+"."+c.key(b)+"."+c.translationSuffix):c.translationSuffix?d=a.get(c.key(b)+"."+c.translationSuffix):c.translationPrefix&&(d=a.get(c.translationPrefix+"."+c.key(b))),d},c.changed=function(){var a=c.customUrlParameter?c.customUrlParameter:c.property;f.changeFilter(a,c.viewModel.val,!!c.customUrlParameter)},b.isDefined(c.labelProperty)&&(c.label=function(d){return b.isObject(d.attributes[c.labelProperty])?a.localize(d.attributes[c.labelProperty]):d.attributes[c.labelProperty]}),b.isDefined(c.labelTransformFn)&&(c.label=c.labelTransformFn),c.$watch("collection.filterable.filterValues."+c.property,function(a){a&&a.length>0?c.viewModel.val=a:c.viewModel.val=null})}}}]).directive("mwSidebarInputBb",function(){return{require:"^mwSidebarFiltersBb",scope:{type:"@",property:"@",placeholder:"@",mwDisabled:"=",customUrlParameter:"@"},templateUrl:"uikit/templates/mwSidebarBb/mwSidebarInput.html",link:function(a,b,c,d){a.viewModel={},a._type=a.type||"text",a.isValid=function(){return b.find("input").first().hasClass("ng-valid")},a.changed=function(){var b=a.customUrlParameter?a.customUrlParameter:a.property;d.changeFilter(b,a.viewModel.val,!!a.customUrlParameter)}}}}).directive("mwSidebarNumberInputBb",function(){return{require:"^mwSidebarFiltersBb",scope:{property:"@",placeholder:"@",mwDisabled:"=",customUrlParameter:"@",min:"@",max:"@"},templateUrl:"uikit/templates/mwSidebarBb/mwSidebarNumberInput.html",link:function(a,b,c,d){a.viewModel={},a.isValid=function(){return b.find("input").first().hasClass("ng-valid")},a.changed=function(){var b=a.customUrlParameter?a.customUrlParameter:a.property;console.log(b,a.viewModel.val),d.changeFilter(b,a.viewModel.val,!!a.customUrlParameter)}}}}),b.module("mwTabs",[]).directive("mwTabs",function(){return{restrict:"A",replace:!0,scope:{justified:"=",activePaneNumber:"="},transclude:!0,templateUrl:"uikit/templates/mwTabs.html",controller:["$scope",function(a){var c=a.panes=[];a.select=function(d){b.forEach(c,function(a){a.selected=!1}),a.activePaneNumber&&(a.activePaneNumber=_.indexOf(a.panes,d)+1),d.selected=!0},this.registerPane=function(b){if(a.activePaneNumber&&a.activePaneNumber-1===c.length||!c.length&&!a.activePaneNumber){var d=a.activePaneNumber;a.select(b),a.activePaneNumber=d}c.push(b)}}]}}).directive("mwTabsPane",function(){return{restrict:"A",scope:{title:"@mwTabsPane",isInvalid:"="},replace:!0,transclude:!0,require:"^mwTabs",template:'<div class="tab-pane" ng-class="{active: selected}" ng-transclude></div>',link:function(a,b,c,d){d.registerPane(a)}}}),b.module("mwToast",[]).directive("mwToasts",["Toast",function(a){return{templateUrl:"uikit/templates/mwToast/mwToasts.html",link:function(b){b.toasts=a.getToasts(),b.$watch(function(){return a.getToasts().length},function(){b.toasts=a.getToasts()}),b.hideToast=function(b){a.removeToast(b)}}}}]).provider("Toast",function(){var a=5e3,b=[],c={primary:"fa-flag-o",info:"fa-info",success:"fa-check",warning:"fa-warning",danger:"fa-exclamation"},d=function(a,b){b=b||{},b.button=b.button||{};var d,e={id:b.id||_.uniqueId("toast"),type:b.type||"default",visible:!0,message:a,title:b.title,autoHide:b.autoHide||!1,autoHideTime:b.autoHideTime||5e3,autoHideCallback:b.autoHideCallback,isHtmlMessage:b.isHtmlMessage,icon:b.icon||c[b.type]||"fa-info",button:{title:b.button.title,link:b.button.link,target:b.button.target,isLink:b.button.isLink||!!b.button.link,action:b.button.action},replaceCount:0,initDate:+new Date},f=function(){e.autoHide&&(d=window.setTimeout(function(){e.autoHideCallback&&"function"==typeof e.autoHideCallback&&(e.visible=!1,e.autoHideCallback.apply(this,arguments))}.bind(this),e.autoHideTime))},g=function(){d&&window.clearTimeout(d),f()},h=function(a){e.autoHideCallback=a,g()},i=function(a){e.message=a,e.replaceCount++,g()};return e.replaceMessage=i,e.setAutoHideCallback=h,f(),e};this.setAutoHideTime=function(b){a=b},this.setDefaultIcons=function(a){_.extend(c,a)},this.$get=["$timeout",function(c){return{findToast:function(a){var c=_.findWhere(b,{id:a});return c?c.toast:!1},clear:function(){b=[]},getToasts:function(){return _.pluck(b,"toast")},replaceToastMessage:function(a,b){var c=this.findToast(a);return c&&c.replaceMessage(b),c},removeToast:function(a){var c=_.findWhere(b,{id:a}),d=_.indexOf(b,c);return c&&b.splice(d,1),c},addToast:function(e,f){f=f||{},f.autoHideTime=f.autoHideTime||a;var g=this.findToast(f.id);if(!g){var h=new d(e,f),i=function(){c(function(){f.autoHideCallback&&"function"==typeof f.autoHideCallback&&f.autoHideCallback.apply(this,arguments),this.removeToast(h.id)}.bind(this))}.bind(this);return h.setAutoHideCallback(i),b.push({id:h.id,toast:h}),h}this.replaceToastMessage(g.id,e)}}}]}),b.module("mwWizard",[]).service("Wizard",function(){var a=[],b=function(a){var b=[],c=0,d=a;this._registerStep=function(a,c){b.length<1&&(a._isActive=!0),a.slideId=c||_.uniqueId(d+"_"),b.push(a)},this._unRegisterStep=function(a){var c=_.findWhere(b,{$id:a.$id}),d=_.indexOf(b,c);d>-1&&b.splice(d,1)},this.destroy=function(){var a=this;b.forEach(function(b){a._unRegisterStep(b)})},this.getId=function(){return d},this.getAllSteps=function(){return b},this.getCurrentStep=function(){return b[c]},this.getCurrentStepNumber=function(){return c},this.getCurrentStepId=function(){return b[c].slideId},this.getTotalStepAmount=function(){return b.length},this.hasNextStep=function(){return this.getCurrentStepNumber()<this.getTotalStepAmount()-1},this.hasPreviousStep=function(){return this.getCurrentStepNumber()>0},this.next=function(){this.goTo(c+1)},this.back=function(){this.goTo(c-1)},this.gotoStep=function(a){"string"==typeof a&&(a=_.findWhere(b,{slideId:a})),this.goTo(_.indexOf(b,a))},this.goTo=function(a){if(b[c]._isActive=!1,a>=b.length)throw new Error("Step "+(a+1)+" is not available");b[a]._isActive=!0,c=a}},c=function(b){var c=null;return a.forEach(function(a){a.getId===b&&(c=a)}),c},d=function(a){var b=c(a);if(b)return b;throw new Error("The wizard with the id "+a+" does not exist")},e=function(d){if(c(d))throw new Error("The wizard with the id "+d+" is already existing");var e=new b(d);return a.push(e),e};return{createWizard:e,getWizard:d}}).directive("mwWizard",function(){return{restrict:"A",scope:{wizard:"=mwWizard"},transclude:!0,template:'<div ng-transclude class="mw-wizard"></div>',controller:["$scope",function(a){var b=a.wizard;this.registerStep=function(a,c){b._registerStep(a,c)},this.unRegisterStep=function(a){b._unRegisterStep(a)},a.$on("$destroy",function(){b.destroy()})}]}}).directive("mwWizardStep",function(){return{restrict:"A",scope:!0,transclude:!0,replace:!0,require:"^mwWizard",template:'<div class="mw-wizard-step" ng-class="{active:_isActive}" ng-show="_isActive"><div class="mw-wizard-step-inner" ng-transclude ng-if="_isActive"></div></div>',link:function(a,b,c,d){a._isActive=!1,c.title=c.title||"noname",c.$observe("title",function(b){b&&b.length>0&&(a.title=b),d.registerStep(a,c.id)}),a.$on("$destroy",function(){d.unRegisterStep(a)})}}})}(window,angular),angular.module("mwUI").run(["$templateCache",function(a){"use strict";a.put("uikit/templates/mwComponents/_mwMarkdownPreviewPopoper.html","<div class=\"mw-markdown-preview-popover\"><p>{{ 'markdownTooltip.description' | i18n }}</p><h1>#{{ 'markdownTooltip.level1Header' | i18n }}</h1><h2>##{{ 'markdownTooltip.level2Header' | i18n }}</h2>{{ 'markdownTooltip.list' | i18n }}<ul><li>* {{ 'markdownTooltip.item' | i18n }} 1</li><li>* {{ 'markdownTooltip.item' | i18n }} 2</li><li>* {{ 'markdownTooltip.item' | i18n }} 3</li></ul><ol><li>1. {{ 'markdownTooltip.item' | i18n }}</li><li>2. {{ 'markdownTooltip.item' | i18n }}</li><li>3. {{ 'markdownTooltip.item' | i18n }}</li></ol><p>{{ 'markdownTooltip.link' | i18n }}</p></div>"),a.put("uikit/templates/mwComponents/mwAlert.html",'<div class="alert alert-dismissable alert-{{ type }}"><div ng-transclude></div></div>'),a.put("uikit/templates/mwComponents/mwBreadCrumb.html",'<div class="mw-bread-crumb"><a ng-href="{{url}}" class="bread-crumb">{{title}}</a> <span mw-icon="fa-caret-right" class="arrow"></span></div>'),a.put("uikit/templates/mwComponents/mwCollapsable.html",'<div class="mw-collapsable"><div class="mw-collapsable-heading" ng-click="toggle()"><i class="fa fa-angle-right" ng-class="{\'fa-rotate-90\': viewModel.collapsed}"></i> <span class="mw-collapsable-heading-text">{{title}}</span></div><div ng-class="{\'collapsed\': viewModel.collapsed}" class="mw-collapsable-body mw-collapsable-animate margin-top-5" ng-transclude></div></div>'),a.put("uikit/templates/mwComponents/mwFilterableSearch.html",'<div class="row mw-filterable-search"><div class="col-md-12"><div class="input-group"><input type="text" placeholder="{{ \'common.search\' | i18n }}" class="form-control" ng-keyup="search($event)" ng-model="model.value" ng-disabled="mwDisabled"> <span class="input-group-addon filterable-search-btn" ng-click="search()"><span ng-show="searching" class="search-indicator"></span> <span ng-hide="(searching || model.value.length>0) || isMobile" mw-icon="search"></span> <span ng-if="(model.value.length>0 && !searching) && !isMobile" mw-icon="rln-icon add" class="red rotate-45" ng-click="reset()"></span></span></div></div></div>'),a.put("uikit/templates/mwComponents/mwHeader.html",'<div class="mw-header"><div ng-if="showBackButton" class="back-btn clickable" data-text="{{\'common.back\' | i18n}}" ng-click="back()"><span mw-icon="fa-angle-left"></span></div><div class="title-holder"><span mw-icon="{{mwTitleIcon}}" class="header-icon" ng-if="mwTitleIcon"></span><div ng-if="mwBreadCrumbs" mw-bread-crumbs-holder><div ng-repeat="breadCrumb in mwBreadCrumbs" mw-bread-crumb url="{{breadCrumb.url}}" title="{{breadCrumb.title}}" show-arrow="true"></div></div><h1 class="lead page-title" ng-click="refresh()">{{title}}</h1></div><div ng-if="warningCondition" class="warnin-content" mw-tooltip="{{ warningText }}"><span class="text-warning" mw-icon="fa-warning"></span> <span class="popover-container"></span></div><div class="additional-content-holder" ng-transclude></div></div>'),a.put("uikit/templates/mwComponents/mwMarkdownPreview.html",'<div class="toggler text-right text-muted"><span ng-click="showPreview = !showPreview" title="Show Markdown Preview">{{ showPreview ? \'common.hidePreview\' : \'common.showMarkdownPreview\' | i18n }}</span> <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank"><span mw-popover="markdownTooltip" popover-url="uikit/templates/mwComponents/_mwMarkdownPreviewPopoper.html" popover-trigger="hover" popover-position="bottom" popover-title="Markdown Syntax"><span mw-icon="fa-question-circle"></span></span></a></div><div ng-if="showPreview" class="preview" mw-markdown="mwModel"></div>'),a.put("uikit/templates/mwComponents/mwOptionGroup.html",'<div class="mw-option-group panel panel-default"><fieldset ng-disabled="mwDisabled"><div class="panel-body"><span ng-transclude></span><label class="options-container display-inline clickable" ng-class="{\'with-icon\':icon}" for="{{randomId}}"><div class="clearfix"><div ng-if="icon" class="col-md-1 icon-holder"><span mw-icon="{{icon}}"></span></div><div class="description" ng-class="{\'col-md-11\': icon, \'col-md-12\': !icon}"><h4>{{title}}</h4><p>{{description}}</p></div></div></label></div></fieldset></div>'),a.put("uikit/templates/mwComponents/mwPanel.html",'<div class="panel panel-default"><div class="panel-body" ng-transclude></div></div>'),a.put("uikit/templates/mwComponents/mwSortIndicator.html",'<span class="sort-indicators"><i ng-show="!isActive" mw-icon="fa-sort" class="sort-indicator"></i> <i ng-if="isActive && !isReversed" mw-icon="fa-sort-asc"></i> <i ng-if="isActive && isReversed" mw-icon="fa-sort-desc"></i></span>'),a.put("uikit/templates/mwComponents/mwTextCollapse.html",'<div ng-if="markdown"><div mw-markdown="text()"></div><a ng-if="showButton" ng-click="toggleLength()" style="cursor: pointer">{{ showLessOrMore() | i18n }}</a></div><div ng-if="!markdown"><span class="line-break">{{ text() }}</span> <a ng-if="showButton" ng-click="toggleLength()" style="cursor: pointer">{{ showLessOrMore() | i18n }}</a></div>'),a.put("uikit/templates/mwComponents/mwTimelineFieldset.html",'<fieldset class="mw-timeline-fieldset" ng-class="{\'entries-are-hidden\':!entriesVisible, \'collapsable\': collapsable}"><div ng-if="mwTitle" ng-click="toggleEntries()" class="legend">{{mwTitle}} <span ng-if="collapsable && entriesVisible" class="toggler"><i mw-icon="fa-chevron-circle-down"></i></span> <span ng-if="collapsable && !entriesVisible" class="toggler"><i mw-icon="fa-chevron-circle-up"></i></span></div><div ng-show="!entriesVisible" class="hidden-entries" ng-click="toggleEntries()">{{ hiddenEntriesText() | i18n:{count:entries.length} }}</div><ul class="clearfix timeline-entry-list" ng-transclude ng-show="entriesVisible"></ul></fieldset>'),a.put("uikit/templates/mwComponents/mwToggle.html",'<span class="mw mw-toggle"><button class="no toggle btn btn-link" ng-click="toggle(true)" ng-disabled="mwDisabled"><span>{{ \'common.on\' | i18n }}</span></button> <button class="yes toggle btn btn-link" ng-click="toggle(false)" ng-disabled="mwDisabled"><span>{{ \'common.off\' | i18n }}</span></button> <span class="label indicator" ng-class="{ true: \'label-success enabled\', false: \'label-danger\' }[mwModel]"></span></span>'),a.put("uikit/templates/mwComponentsBb/mwEmptyStateBb.html",'<div><div ng-if="!showEmptyState()" ng-transclude></div><div ng-if="showEmptyState()" class="mw-empty-state"><img src="images/logo-grey.png"><h2 class="lead">{{ text | i18n }}</h2><div ng-if="buttonText"><button class="btn btn-primary btn-large" ng-click="button()">{{buttonText}}</button></div></div></div>'),a.put("uikit/templates/mwComponentsBb/mwFilterableSearch.html",'<div class="row mw-filterable-search" ng-class="{\'has-value\':hasValue()}"><div class="input-holder input-group"><span class="input-group-addon clickable" ng-click="focus()"><span mw-icon="fa-search" ng-class="{searching:searching}" class="search-icon"></span> <span ng-click="reset()" mw-prevent-default="click" mw-stop-propagation="click" mw-icon="rln-icon close_cross" class="reset-icon red clickable"></span></span> <input type="text" placeholder="{{placeholder || (\'common.search\' | i18n)}}" ng-keyup="keyUp()" ng-model="viewModel.searchVal" ng-change="search($event)" ng-model-options="{ debounce: 500 }" ng-disabled="mwDisabled"></div></div>'),a.put("uikit/templates/mwComponentsBb/mwVersionSelector.html",'<div class="btn-group mw-version-selector"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="descriptor">Version</span> <span class="descriptor-sm">V.</span> {{currentVersionModel.attributes[versionNumberKey]}} <span ng-if="currentVersionModel.attributes.published" mw-icon="rln-icon published"></span></button><ul class="version-dropdown dropdown-menu pull-right" style="min-width:100%" role="menu"><li ng-repeat="version in versionCollection.models" ng-class="{active:(version.attributes.uuid === currentVersionModel.attributes.uuid)}"><a ng-href="{{getUrl(version.attributes.uuid)}}">{{version.attributes[versionNumberKey]}} <span ng-if="version.attributes.published" mw-icon="rln-icon published"></span></a></li></ul></div>'),a.put("uikit/templates/mwDatePicker.html",'<div class="mw-date-picker clearfix" ng-class="{\'datepicker-visible\': viewModel.datepickerIsOpened}" ng-form><div class="input-group date-picker-holder"><div class="input-group-addon"><span class="fa fa-calendar"></span></div><input type="text" class="date-picker pull-left"></div><div class="time-picker-holder"><div class="time-picker-icon"><span class="fa fa-clock-o"></span></div><fieldset ng-disabled="!viewModel.date"><div class="number-spinner-holder hours"><input type="number" min="0" max="23" ng-model="viewModel.hours" mw-leading-zero ng-disabled="!canChange(1,\'HOURS\') && !canChange(-1,\'HOURS\')"> <button class="btn btn-default btn-link number-spinner increment clickable" ng-mousedown="startIncrementCounter(\'hours\', 0, 23)" ng-mouseup="stopIncrementCounter()" ng-click="increment(\'hours\', 0, 23)" tabindex="-1" ng-disabled="!canChange(1,\'HOURS\')"><span class="fa fa-angle-up"></span></button> <button class="btn btn-default btn-link number-spinner decrement clickable" ng-mousedown="startDecrementCounter(\'hours\', 0, 23)" ng-mouseup="stopDecrementCounter()" ng-click="decrement(\'hours\', 0, 23)" tabindex="-1" ng-disabled="!canChange(-1, \'HOURS\')"><span class="fa fa-angle-down"></span></button></div><div class="number-spinner-holder minutes"><input type="number" min="0" max="59" ng-model="viewModel.minutes" mw-leading-zero ng-disabled="!canChange(1,\'MINUTES\') && !canChange(-1,\'MINUTES\')"> <button class="btn btn-default btn-link number-spinner increment clickable" ng-mousedown="startIncrementCounter(\'minutes\', 0, 59)" ng-mouseup="stopIncrementCounter()" ng-click="increment(\'minutes\', 0, 59)" tabindex="-1" ng-disabled="!canChange(1,\'MINUTES\')"><span class="fa fa-angle-up"></span></button> <button class="btn btn-default btn-link number-spinner decrement clickable" ng-mousedown="startDecrementCounter(\'minutes\', 0, 59)" ng-mouseup="stopDecrementCounter()" ng-click="decrement(\'minutes\', 0, 59)" tabindex="-1" ng-disabled="!canChange(-1,\'MINUTES\')"><span class="fa fa-angle-down"></span></button></div></fieldset></div><div mw-form-input><input type="hidden" name="dateValidator" ng-model="mwModel" ng-required="mwRequired" mw-validate-date min-date="options.startDate"></div></div>'),a.put("uikit/templates/mwFileUpload/mwFileUpload.html",'<div ng-form="file" class="mw-file-upload {{uploadState}}" ng-class="{\n  \'drag-start\':isInDragState,\n  \'drag-over\':isInDragOverState,\n  \'full-screen\':fullScreen,\n  \'hidden-btn\':hiddenBtn\n  }"><div ng-class="{\'has-error\': file.$error.required}"><div ng-show="uploadState == \'uploading\'" class="upload-progress-bar"><div class="progress progress-striped active margin-top-5"><div class="progress-bar" ng-style="{width: uploadProgress + \'%\'};"></div></div></div><div ng-show="uploadState != \'uploading\'" class="upload-btn"><button ng-show="!fileIsSet()" type="button" class="btn btn-primary btn-upload hidden-on-drag" ng-click="triggerUploadDialog()"><span mw-icon="rln-icon upload"></span> {{ text || (\'common.upload\' | i18n) }}</button><div class="drop-zone"><div class="content"><span mw-icon="fa-file-o"></span><h3>Drop your file here</h3></div></div><div ng-if="fileIsSet()" class="hidden-on-drag"><p ng-if="_showFileName"><span mw-icon="fa-file-o"></span> {{getFileName()}}</p><button type="button" class="btn btn-danger" ng-click="remove()"><span mw-icon="rln-icon delete"></span> {{\'common.remove\' | i18n }}</button></div><span class="help-block hidden-on-drag" ng-show="file.fileValidator.$error.required">{{\'errors.isRequired\' | i18n }}</span></div></div><input type="hidden" name="fileValidator" ng-required="mwRequired" ng-model="model"> <input type="file" class="hidden" name="file" accept="{{inputValidator}}"></div>'),a.put("uikit/templates/mwForm/mwFormActions.html",'<div class="mw-form mw-actions"><div class="btn-group"><button type="button" class="btn btn-danger" ng-if="hasCancel && _showCancel" ng-disabled="form.$pristine && executeDefaultCancel" ng-click="cancelFacade()"><span mw-icon="rln-icon close_cross"></span> <span class="action-text cancel">{{ \'common.cancel\' | i18n }}</span></button> <button type="button" class="btn btn-primary" ng-click="saveFacade()" ng-if="hasSave && _showSave" ng-disabled="form.$invalid || isLoading() || (form.$pristine && executeDefaultCancel)"><span mw-icon="rln-icon check"></span> <span class="action-text save">{{ \'common.save\' | i18n }}</span></button></div></div>'),a.put("uikit/templates/mwForm/mwFormCheckbox.html",'<div class="mw-form-checkbox mw-form form-group clearfix" ng-class="mwClass"><div class="col-sm-offset-3 col-sm-9"><div class="checkbox"><label><div ng-transclude></div>{{ label }}</label><span ng-if="tooltip" mw-icon="rln-icon support" tooltip="{{ tooltip }}"></span> <span ng-repeat="badge in typedBadges" ng-class="\'label-\' + badge.type" class="mw-badge label">{{ badge.text }}</span></div></div></div>'),a.put("uikit/templates/mwForm/mwFormInput.html",'<div class="mw-form mw-form-input form-group" ng-class="{\'has-error\': isInvalid() && isDirty(), \'is-required\': isRequired(), \'is-required-error\':isRequiredError() }"><div class="clearfix"><label ng-if="label" class="col-sm-3 control-label">{{ label }} <span ng-if="tooltip" mw-icon="rln-icon support" tooltip="{{ tooltip }}"></span></label><div ng-class="{ true: \'col-sm-6 col-lg-5\', false: \'col-sm-12\' }[label.length > 0]" ng-transclude></div></div><div ng-if="hideErrors !== true" ng-class="{ true: \'col-sm-6 col-sm-offset-3\', false: \'col-sm-12\' }[label.length > 0]"><span ng-if="hideErrors !== true && hideErrors !== key && isInvalid()" ng-repeat="(key, value) in getCurrentErrors()" mw-form-validation="{{ key }}">{{ validationValues[key] }}</span></div></div>'),a.put("uikit/templates/mwForm/mwFormMultiSelect.html",'<div ng-form><div ng-class="{\'has-error\': showRequiredMessage()}"><div class="checkbox" ng-repeat="(key,value) in filter(options)"><label><input type="checkbox" name="selectOption" mw-custom-checkbox ng-checked="model.indexOf(key) >= 0" ng-click="toggleKeyIntoModelArray(key); setDirty()"> {{ value }}</label></div><div mw-form-input><input type="hidden" name="requireChecker" ng-model="model[0]" ng-required="mwRequired"></div><!--<div ng-class="col-sm-12">--><!--<span class="help-block" ng-show="showRequiredMessage()">{{\'errors.isRequired\' | i18n}}</span>--><!--</div>--><div ng-show="getObjectSize(filter(options)) == 0" ng-transclude></div></div></div>'),a.put("uikit/templates/mwForm/mwFormMultiSelect2.html",'<div ng-form class="mw-form mw-form-multi-select"><div ng-class="{\'has-error\': showRequiredMessage()}"><div class="checkbox" ng-repeat="model in mwOptionsCollection.models"><label><input type="checkbox" name="selectOption" ng-disabled="mwDisabled" mw-custom-checkbox ng-checked="mwCollection.findWhere(model.toJSON())" ng-click="toggleModel(model); setDirty()"> <span ng-if="!mwOptionsLabelI18nPrefix">{{ model.get(mwOptionsLabelKey) }}</span> <span ng-if="mwOptionsLabelI18nPrefix">{{mwOptionsLabelI18nPrefix+\'.\'+model.get(mwOptionsLabelKey) | i18n}}</span></label></div><div mw-form-input><span mw-validate-collection-or-model="mwCollection" mw-required="mwRequired"></span></div></div></div>'),a.put("uikit/templates/mwForm/mwFormWrapper.html",'<div class="mw-form mw-form-wrapper form-group" ng-class="{\'is-required\': isRequired()}"><label ng-if="label" class="col-sm-3 control-label">{{ label }} <span ng-if="tooltip" mw-icon="rln-icon support" tooltip="{{ tooltip }}"></span></label><div class="col-sm-6 col-lg-5" ng-class="{ false: \'col-sm-offset-3\' }[label.length > 0]" ng-transclude></div></div>'),a.put("uikit/templates/mwForm/mwLeaveConfirmation.html",'<div mw-modal title="{{\'common.confirmModal.title\' | i18n}}"><div mw-modal-body><p>{{ text }}</p></div><div mw-modal-footer><button type="button" class="btn btn-default" ng-click="continue()">{{\'common.confirmModal.continue\' | i18n }}</button> <button type="button" class="btn btn-primary" ng-click="stay()">{{\'common.confirmModal.stay\' | i18n }}</button></div></div>'),a.put("uikit/templates/mwFormBb/mwFormMultiSelect.html",'<div ng-form><div class="checkbox" ng-repeat="item in collection.models"><label><input type="checkbox" name="selectOption" mw-custom-checkbox ng-disabled="isDisabled(item)" ng-checked="model.indexOf(item.attributes.key) >= 0" ng-click="toggleKeyIntoModelArray(item.attributes.key); setDirty()"> {{ translationPrefix + \'.\' + item.attributes.key | i18n }}</label></div><div mw-form-input><input type="hidden" name="requireChecker" ng-model="model[0]" ng-required="mwRequired"></div></div>'),a.put("uikit/templates/mwFormBb/mwFormRadioGroup.html",'<form class="mw-form mw-form-radio-group"><div ng-repeat="option in mwOptionsCollection.models"><label><input type="radio" name="radio_group_item" ng-value="option.get(optionsKey)" mw-custom-radio ng-model="$parent.mwModel" ng-disabled="mwDisabled"> <span ng-if="option.get(mwOptionsLabelKey) && !mwOptionsLabelI18nPrefix">{{option.get(mwOptionsLabelKey)}}</span> <span ng-if="option.get(mwOptionsLabelKey) && mwOptionsLabelI18nPrefix">{{mwOptionsLabelI18nPrefix+\'.\'+option.get(mwOptionsLabelKey) | i18n}}</span></label></div></form><input type="hidden" name="{{name}}" ng-model="mwModel" required>'),a.put("uikit/templates/mwFormBb/mwFormSelect.html",'<select class="form-control mw-form-select" mw-custom-select ng-model="viewModel.val" ng-change="mwChange({selectedModel:getSelectedModel(viewModel.val)})" ng-options="getKey(option) as getLabel(option) for option in mwOptionsCollection.models" ng-disabled="mwDisabled" ng-required="mwRequired" name="{{name}}"><option ng-if="mwPlaceholder" value="" disabled>{{mwPlaceholder}}</option></select>'),a.put("uikit/templates/mwFormBb/mwMultiSelectBoxes.html",'<div class="mw-multi-select-boxes"><div class="selected-items" ng-if="mwCollection.models.length>0"><ul class="col-xs-7 col-sm-8 col-md-9"><li ng-repeat="model in mwCollection.models"><span><span mw-icon="rln-icon delete" class="clickable" ng-click="remove(model)"></span></span> <span>{{getLabel(model)}}</span></li></ul></div><div class="row selector"><div class="col-xs-7 col-sm-8 col-md-9"><select ng-options="getLabel(item) for item in mwOptionsCollection.models" mw-custom-select ng-model="viewModel.tmpModel" ng-disabled="mwDisabled"></select></div><div class="col-xs-5 col-sm-4 col-md-3 toggle-btns"><button ng-click="add(viewModel.tmpModel)" ng-disabled="mwDisabled || !viewModel.tmpModel.id" class="btn btn-primary add"><span mw-icon="fa-plus"></span></button></div></div><input type="hidden" ng-model="requiredValue" ng-required="mwRequired" name="{{hiddenFormElementName || \'mwMultiSelectBoxes\'}}"></div>'),a.put("uikit/templates/mwListable/mwListableColumnCheckbox.html",'<input ng-if="!radio" type="checkbox" ng-click="click(item, $event)" ng-disabled="mwDisabled || false" ng-checked="selectable.isSelected(item)" mw-custom-checkbox> <input ng-if="radio" type="radio" name="{{selectable.id}}" ng-click="click(item, $event)" ng-disabled="mwDisabled || false" ng-checked="selectable.isSelected(item)" mw-custom-radio>'),a.put("uikit/templates/mwListable/mwListableFooter.html",'<tr><td colspan="{{ columns.length + 4 }}"><div ng-if=" (!filterable.items() && filterable) || (filterable.items().length < filterable.total() && Loading.isLoading()) "><div rln-spinner></div></div><div ng-if="filterable.items().length < 1" class="text-center"><p class="lead">{{ \'common.noneFound\' | i18n }}</p></div><button ng-if="filterable.items().length < filterable.total() && !Loading.isLoading()" class="btn btn-default btn-lg col-md-12" ng-click="filterable.loadMore()">{{ \'common.loadMore\' | i18n }}</button></td></tr>'),a.put("uikit/templates/mwListable/mwListableHeader.html",'<th ng-class="{ clickable: property, \'sort-active\':(property && isSelected())||sortActive }"><span ng-if="property" ng-click="toggleSortOrder()" class="sort-indicators"><i ng-show="property && !isSelected()" mw-icon="fa-sort" class="sort-indicator"></i> <i ng-if="isSelected(\'-\')" mw-icon="fa-sort-asc"></i> <i ng-if="isSelected(\'+\')" mw-icon="fa-sort-desc"></i></span> <span ng-transclude class="title"></span></th>'),a.put("uikit/templates/mwListable/mwListableHeaderCheckbox.html",'<input type="checkbox" ng-if="!radio && (!filterable || filterable.items().length > 0)" ng-click="toggleAll()" ng-checked="selectable.allSelected()" ng-disabled="selectable.allDisabled()" mw-custom-checkbox>'),a.put("uikit/templates/mwListableBb/mwListableColumnCheckbox.html",'<input ng-if="!isSingleSelection" type="checkbox" ng-click="click(item, $event)" ng-disabled="item.selectable.isDisabled()" ng-checked="item.selectable.isSelected()" mw-custom-checkbox> <input ng-if="isSingleSelection" type="radio" name="{{selectable.id}}" ng-click="click(item, $event)" ng-disabled="item.selectable.isDisabled()" ng-checked="item.selectable.isSelected()" mw-custom-radio>'),a.put("uikit/templates/mwListableBb/mwListableFooter.html",'<tr><td colspan="{{ columns.length + 4 }}"><div ng-if="Loading.isLoading() && collection.filterable.hasNextPage()"><div rln-spinner></div></div><div ng-if="collection.models.length < 1" class="text-center"><p class="lead">{{ \'common.noneFound\' | i18n }}</p></div><!--<button ng-if="collection.filterable.hasNextPage()"\n            class="btn btn-default btn-lg col-md-12"\n            ng-click="collection.filterable.loadNextPage()">\n      {{ \'common.loadMore\' | i18n }}\n    </button>--></td></tr>'),
a.put("uikit/templates/mwListableBb/mwListableHead.html",'<div class="mw-listable-header clearfix" ng-class="{\'show-selected\':canShowSelected(),\'has-selection-control\':!selectable.isSingleSelection() || selectedAmount > 0}"><div class="selection-controller"><div ng-if="selectable" class="holder"><span ng-click="toggleSelectAll()" class="clickable select-all" ng-if="!selectable.isSingleSelection()"><span class="selected-icon"><span class="indicator" ng-if="selectable.allSelected()"></span></span> <a href="#" mw-prevent-default="click">{{\'common.selectAll\' | i18n:{name: collectionName ||i18n.get(\'common.items\')} }}</a></span> <span ng-if="selectedAmount > 0" class="clickable clear" ng-click="selectable.unSelectAll()"><span mw-icon="rln-icon close_cross"></span> <a href="#" mw-prevent-default="click">{{\'common.clearSelection\' | i18n}}</a></span></div></div><div class="search-bar"><div ng-if="searchAttribute" mw-filterable-search-bb collection="collection" placeholder="{{\'common.searchFor\' | i18n:{name: collectionName} }}" property="{{searchAttribute}}"></div></div><div class="selected-counter"><span ng-if="selectable && selectedAmount>0" class="clickable" ng-click="toggleShowSelected()"><a href="#" mw-prevent-default="click"><span ng-if="selectedAmount === 1">{{\'common.itemSelected\' | i18n:{name: getModelAttribute(selectable.getSelected().first())} }}</span> <span ng-if="selectedAmount > 1">{{\'common.itemsSelected\' | i18n:{name: collectionName, count: selectedAmount} }}</span> <span mw-icon="fa-angle-up" ng-show="canShowSelected()"></span> <span mw-icon="fa-angle-down" ng-show="!canShowSelected()"></span></a></span><div ng-if="!selectable || selectedAmount<1" ng-transclude class="extra-content"></div><span ng-if="!selectable || selectedAmount<1">{{\'common.itemAmount\' | i18n:{name: collectionName, count: getTotalAmount()} }}</span></div><div class="selected-items" ng-if="canShowSelected()"><div class="items clearfix"><div class="box-shadow-container"><div ng-if="!isLoadingModelsNotInCollection" ng-repeat="item in selectable.getSelected().models" ng-click="unSelect(item)" ng-class="{\'label-danger\':item.selectable.isDeletedItem}" class="label label-default clickable"><span ng-if="item.selectable.isDeletedItem" mw-tooltip="{{\'common.notAvailableTooltip\' | i18n}}"><span mw-icon="fa-warning"></span>{{\'common.notAvailable\' | i18n}}</span> <span ng-if="!item.selectable.isDeletedItem">{{getModelAttribute(item)}}</span> <span mw-icon="rln-icon close_cross"></span></div><div ng-if="isLoadingModelsNotInCollection"><div rln-spinner></div></div></div></div><div class="close-pane" ng-click="hideSelected()"></div></div></div>'),a.put("uikit/templates/mwListableBb/mwListableHeader.html",'<th ng-class="{ clickable: property, \'sort-active\':(property && isSelected())||sortActive }"><span ng-if="property" ng-click="toggleSortOrder()" class="sort-indicators"><i ng-show="property && !isSelected()" mw-icon="fa-sort" class="sort-indicator"></i> <i ng-if="isSelected(\'-\')" mw-icon="fa-sort-asc"></i> <i ng-if="isSelected(\'+\')" mw-icon="fa-sort-desc"></i></span> <span ng-transclude class="title"></span></th>'),a.put("uikit/templates/mwListableBb/mwListableHeaderCheckbox.html",'<input type="checkbox" ng-if="!isSingleSelection" ng-click="collection.selectable.toggleSelectAll()" ng-checked="collection.selectable.allSelected()" ng-disabled="collection.selectable.allDisabled()" mw-custom-checkbox>'),a.put("uikit/templates/mwMap/mwMap.html",'<div><div id="map" class="olMap"></div><div ng-transclude></div></div>'),a.put("uikit/templates/mwModal/mwModal.html",'<div class="modal fade" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header clearfix" ng-if="title"><img ng-if="mwModalTmpl.getLogoPath()" ng-src="{{mwModalTmpl.getLogoPath()}}" class="pull-left logo"><h4 class="modal-title pull-left">{{ title }}</h4></div><div class="body-holder"><div mw-toasts class="notifications"></div><div ng-transclude class="modal-content-wrapper"></div></div></div></div></div>'),a.put("uikit/templates/mwModal/mwModalConfirm.html",'<div mw-modal title="{{ \'common.areYouSure\' | i18n }}"><div mw-modal-body><div ng-transclude></div></div><div mw-modal-footer><button type="button" class="btn btn-default" data-dismiss="modal" ng-click="cancel()">{{\'common.cancel\' | i18n }}</button> <button type="button" mw-modal-on-enter class="btn btn-primary" data-dismiss="modal" ng-click="ok()">{{\'common.ok\' | i18n }}</button></div></div>'),a.put("uikit/templates/mwNav/mwNavbar.html",'<div class="navbar navbar-default navbar-fixed-top" ng-transclude></div>'),a.put("uikit/templates/mwNav/mwNavbarBrand.html",'<div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#/" ng-transclude></a></div>'),a.put("uikit/templates/mwSidebar/mwSidebarFilters.html",'<div class="mw-sidebar-filters"><div class="filter-toggler margin-top-10"><a class="clickable btn btn-default btn-block" ng-click="toggleFilters = !toggleFilters; resetFiltersOnClose()"><span class="fa fa-times toggle-indicator rotate-45" ng-class="{\'red active\':toggleFilters}"></span> <span ng-if="toggleFilters">{{\'common.removeFilters\' | i18n}}</span> <span ng-if="!toggleFilters">{{\'common.addFilter\' | i18n}}</span></a></div><div ng-if="toggleFilters" ng-transclude class="filters animate-height"></div></div>'),a.put("uikit/templates/mwSidebar/mwSidebarPanel.html",'<div class="sidebar" compile-callback><div ng-transclude class="content-container"></div></div>'),a.put("uikit/templates/mwSidebar/mwSidebarSelect.html",'<div class="row"><div class="col-md-12"><select class="form-control" mw-custom-select ng-model="model.value" ng-change="filterable.applyFilters()" ng-options="key as value for (key, value) in model.all" ng-disabled="mwDisabled"></select></div></div>'),a.put("uikit/templates/mwSidebarBb/mwSidebarFilters.html",'<div class="mw-sidebar-filters" ng-class="{\'form-active\':viewModel.showFilterForm, \'form-in-active\':!viewModel.showFilterForm}"><div ng-if="mwListCollection" class="btn-group btn-block persisted-filters"><button class="btn btn-default btn-block dropdown-toggle" ng-class="{hidden:viewModel.showFilterForm}" data-toggle="dropdown"><span mw-icon="rln-icon filter_add"></span> {{appliedFilter.get(\'name\') || (\'common.applyQuickFilter\' | i18n) }}</button><ul class="filter-dropdown dropdown-menu" style="min-width:100%" role="menu"><li ng-class="{\'active\':appliedFilter.id===filter.id}" class="filter"><a href="#" mw-prevent-default="click" ng-click="revokeFilter()" class="btn btn-link">{{\'common.unFiltered\' | i18n}}</a></li><li ng-repeat="filter in filters.models" ng-class="{\'active\':appliedFilter.id===filter.id}" class="filter"><a href="#" mw-prevent-default="click" ng-click="applyFilter(filter)" class="btn btn-link">{{filter.get(\'name\')}}</a><div ng-if="appliedFilter.id===filter.id" class="pull-right action-btns hidden-xs hidden-sm"><button class="btn btn-link" ng-click="editFilter(filter)"><span mw-icon="rln-icon edit"></span></button> <button class="btn btn-link" ng-click="deleteFilter(filter)"><span mw-icon="rln-icon delete"></span></button></div></li><li class="filter"><a href="#" mw-prevent-default="click" ng-click="addFilter(filter)" class="btn btn-link">+ {{\'common.addFilter\' | i18n}}</a></li></ul></div><div class="form" ng-if="viewModel.showFilterForm"><div ng-transclude></div><div ng-if="mwListCollection && filtersAreApplied()" class="panel panel-default margin-top-10 quickfilter-form"><div class="panel-body"><p>{{\'common.saveQuickFilter\' | i18n}}</p><input type="text" placeholder="{{\'common.quickFilterName\' | i18n}}" class="margin-top-10" ng-model="viewModel.tmpFilter.attributes.name"><div class="margin-top-10"><button class="btn btn-danger" ng-click="cancelFilterEdit()">{{\'common.cancel\' | i18n}}</button> <button class="btn btn-primary" ng-disabled="!viewModel.tmpFilter.isValid()" ng-click="saveFilter()">{{\'common.save\' | i18n}}</button></div></div></div><div ng-if="mwListCollection && !filtersAreApplied()" class="margin-top-10"><button class="btn btn-danger btn-block" ng-click="cancelFilterEdit()">{{\'common.cancel\' | i18n}}</button></div></div></div>'),a.put("uikit/templates/mwSidebarBb/mwSidebarInput.html",'<div class="row"><div class="col-md-12 form-group" ng-class="{\'has-error\': !isValid()}" style="margin-bottom: 0"><input type="{{_type}}" ng-if="!customUrlParameter" class="form-control" ng-model="viewModel.val" ng-change="changed()" ng-disabled="mwDisabled" placeholder="{{placeholder}}" ng-model-options="{ debounce: 500 }"><input type="{{_type}}" ng-if="customUrlParameter" class="form-control" ng-model="viewModel.val" ng-change="changed()" ng-disabled="mwDisabled" placeholder="{{placeholder}}" ng-model-options="{ debounce: 500 }"></div></div>'),a.put("uikit/templates/mwSidebarBb/mwSidebarNumberInput.html",'<div class="row"><div class="col-md-12 form-group" ng-class="{\'has-error\': !isValid()}" style="margin-bottom: 0"><input type="number" ng-if="!customUrlParameter" class="form-control" ng-model="viewModel.val" ng-change="changed()" ng-disabled="mwDisabled" placeholder="{{placeholder}}" min="{{min}}" max="{{max}}" ng-model-options="{ debounce: 500 }"><input type="number" ng-if="customUrlParameter" class="form-control" ng-model="viewModel.val" ng-change="changed()" ng-disabled="mwDisabled" placeholder="{{placeholder}}" min="{{min}}" max="{{max}}" ng-model-options="{ debounce: 500 }"></div></div>'),a.put("uikit/templates/mwSidebarBb/mwSidebarSelect.html",'<div class="row"><div class="col-md-12"><select ng-if="!customUrlParameter" class="form-control" mw-custom-select ng-model="viewModel.val" ng-change="changed()" ng-options="key(model) as label(model) for model in options.models" ng-disabled="mwDisabled"><option value="">{{ placeholder }}</option></select><select ng-if="customUrlParameter" class="form-control" mw-custom-select ng-model="viewModel.val" ng-change="changed()" ng-options="key(model) as label(model) for model in options.models" ng-disabled="mwDisabled"><option value="">{{ placeholder }}</option></select></div></div>'),a.put("uikit/templates/mwTabs.html",'<div class="clearfix mw-tabs" ng-class="{justified: justified}"><ul class="nav nav-tabs" ng-class="{ \'nav-justified\': justified }"><li ng-repeat="pane in panes" ng-class="{ active: pane.selected }"><a ng-class="{ \'has-error\': pane.isInvalid }" ng-click="select(pane)">{{ pane.title }}</a></li></ul><div class="tab-content row" ng-transclude></div></div>'),a.put("uikit/templates/mwToast/mwToasts.html",'<div class="message messages-list mw-toasts"><div class="content"><ul><li ng-repeat="toast in toasts" class="message-item"><div class="status-indicator {{toast.type}}"><span mw-icon="{{toast.icon}}"></span></div><div class="message"><div class="holder margin-top-5"><h5 ng-if="toast.title">{{toast.title}}</h5><span ng-if="!toast.isHtmlMessage">{{toast.message | limitTo:500}}</span> <span ng-if="toast.isHtmlMessage" ng-bind-html="toast.message"></span> <a class="action-button btn btn-link btn-xs" ng-if="toast.button && toast.button.isLink && toast.button.action && !toast.button.link" href="#"><span ng-click="hideToast(toast); toast.button.action()" mw-prevent-default="click">{{toast.button.title}}</span></a> <a class="action-button btn btn-link btn-xs" ng-if="toast.button && toast.button.isLink && toast.button.link" ng-href="{{toast.button.link}}" target="{{toast.button.target}}"><span>{{toast.button.title}}</span></a><div ng-if="toast.button && !toast.button.isLink && toast.button.action"><div class="action-button btn btn-default btn-xs margin-top-5"><div ng-click="hideToast(toast); toast.button.action()">{{toast.button.title}}</div></div></div></div><div class="closer" ng-click="hideToast(toast.id)"><i class="rln-icon close_cross"></i></div></div></li></ul></div></div>')}]);